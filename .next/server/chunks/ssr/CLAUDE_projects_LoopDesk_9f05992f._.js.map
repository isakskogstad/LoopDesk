{
  "version": 3,
  "sources": [],
  "debugId": "60855949-7814-a6b0-8c1e-3965402fc75b",
  "sections": [
    {"offset": {"line": 1, "column": 0}, "map": {"version":3,"sources":["../../../../../../../CLAUDE/projects/LoopDesk/node_modules/lucide-react/src/icons/arrow-left.ts","../../../../../../../CLAUDE/projects/LoopDesk/src/app/bolag/annual-report/%5B...path%5D/page.tsx"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm12 19-7-7 7-7', key: '1l729n' }],\n  ['path', { d: 'M19 12H5', key: 'x3x0zl' }],\n];\n\n/**\n * @component @name ArrowLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTIgMTktNy03IDctNyIgLz4KICA8cGF0aCBkPSJNMTkgMTJINSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowLeft = createLucideIcon('arrow-left', __iconNode);\n\nexport default ArrowLeft;\n","\"use client\";\n\nimport { useParams } from \"next/navigation\";\nimport { useEffect, useState } from \"react\";\nimport { ArrowLeft, Download, Loader2 } from \"lucide-react\";\nimport Link from \"next/link\";\nimport { Button } from \"@/components/ui/button\";\n\nexport default function AnnualReportViewer() {\n  const params = useParams();\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Path segments: orgNr/filename\n  const pathSegments = params.path as string[];\n  const orgNrFolder = pathSegments?.[0] || \"\";\n  const fileName = pathSegments?.[1] || \"\";\n\n  // Use proxy endpoint to serve with correct content-type\n  const proxyUrl = `/api/bolag/annual-reports/proxy?path=${encodeURIComponent(`${orgNrFolder}/${fileName}`)}`;\n\n  // Use proxy with download=true for proper file download\n  const downloadUrl = `${proxyUrl}&download=true`;\n\n  // Extract year and org number for display\n  const yearMatch = fileName.match(/\\.(\\d{4})\\./);\n  const year = yearMatch ? yearMatch[1] : \"\";\n  const orgNrFormatted = fileName.match(/^(\\d{6}-\\d{4})/)?.[1] || orgNrFolder;\n\n  useEffect(() => {\n    // Check if iframe loaded successfully\n    const timer = setTimeout(() => {\n      setLoading(false);\n    }, 2000);\n\n    return () => clearTimeout(timer);\n  }, []);\n\n  const handleIframeLoad = () => {\n    setLoading(false);\n  };\n\n  const handleIframeError = () => {\n    setLoading(false);\n    setError(\"Kunde inte ladda årsredovisningen\");\n  };\n\n  if (!orgNrFolder || !fileName) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <p className=\"text-muted-foreground\">Ogiltig URL</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      {/* Header */}\n      <header className=\"border-b border-border bg-card px-4 py-3 flex items-center justify-between\">\n        <div className=\"flex items-center gap-4\">\n          <Link href=\"/bevakning\">\n            <Button variant=\"ghost\" size=\"sm\">\n              <ArrowLeft className=\"w-4 h-4 mr-2\" />\n              Tillbaka\n            </Button>\n          </Link>\n          <div>\n            <h1 className=\"text-lg font-semibold\">\n              Årsredovisning {year}\n            </h1>\n            <p className=\"text-sm text-muted-foreground\">{orgNrFormatted}</p>\n          </div>\n        </div>\n        <a href={downloadUrl} download>\n          <Button variant=\"outline\" size=\"sm\">\n            <Download className=\"w-4 h-4 mr-2\" />\n            Ladda ner\n          </Button>\n        </a>\n      </header>\n\n      {/* Content */}\n      <main className=\"flex-1 relative\">\n        {loading && (\n          <div className=\"absolute inset-0 flex items-center justify-center bg-background z-10\">\n            <div className=\"flex items-center gap-2 text-muted-foreground\">\n              <Loader2 className=\"w-5 h-5 animate-spin\" />\n              <span>Laddar årsredovisning...</span>\n            </div>\n          </div>\n        )}\n\n        {error ? (\n          <div className=\"absolute inset-0 flex items-center justify-center\">\n            <div className=\"text-center\">\n              <p className=\"text-destructive mb-4\">{error}</p>\n              <a href={proxyUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n                <Button variant=\"outline\">Öppna i nytt fönster</Button>\n              </a>\n            </div>\n          </div>\n        ) : (\n          <div className=\"flex justify-center w-full h-full bg-muted/30\">\n            <iframe\n              src={proxyUrl}\n              className=\"border-0 bg-white shadow-lg\"\n              style={{\n                minHeight: \"calc(100vh - 65px)\",\n                width: \"100%\",\n                maxWidth: \"900px\"\n              }}\n              onLoad={handleIframeLoad}\n              onError={handleIframeError}\n              title={`Årsredovisning ${year} - ${orgNrFormatted}`}\n            />\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}}]
}