;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="ffe4cd36-92c4-2a91-2bc4-1a060792943c")}catch(e){}}();
module.exports=[31761,a=>{"use strict";var b=a.i(367636),c=a.i(396112),d=a.i(997074),e=a.i(393902),f=a.i(725934),g=a.i(809773),h=a.i(84823),i=a.i(822983),j=a.i(356967),k=a.i(898184),l=a.i(36146),m=a.i(766479),n=a.i(728625),o=a.i(916938),p=a.i(513041),q=a.i(722242),r=a.i(454216),s=a.i(596741),t=a.i(688561),u=a.i(367609),v=a.i(143879),w=a.i(630384);let x=[{bg:"bg-blue-500",text:"text-blue-600",hex:"#3b82f6",light:"bg-blue-100 dark:bg-blue-900/30"},{bg:"bg-emerald-500",text:"text-emerald-600",hex:"#10b981",light:"bg-emerald-100 dark:bg-emerald-900/30"},{bg:"bg-purple-500",text:"text-purple-600",hex:"#8b5cf6",light:"bg-purple-100 dark:bg-purple-900/30"}];function y({companies:a,metrics:d}){let e=(0,c.useMemo)(()=>d.map(b=>{let c=a.map(a=>b.getValue(a)??0),d=Math.max(...c,1),e=Math.min(...c.filter(a=>0!==a),0);return{label:b.label,values:c.map(a=>(a-e)/(d-e||1)*100),rawValues:c}}),[a,d]),f=2*Math.PI/d.length,g=(a,b)=>({x:140+Math.cos(a-Math.PI/2)*b,y:140+Math.sin(a-Math.PI/2)*b});return(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsxs)("svg",{width:280,height:280,className:"overflow-visible",children:[Array.from({length:5}).map((a,c)=>(0,b.jsx)("circle",{cx:140,cy:140,r:20*(c+1),fill:"none",stroke:"currentColor",strokeOpacity:.1,className:"text-muted-foreground"},`level-${c}`)),d.map((a,c)=>{let d=f*c,e=g(d,140);return(0,b.jsxs)("g",{children:[(0,b.jsx)("line",{x1:140,y1:140,x2:g(d,100).x,y2:g(d,100).y,stroke:"currentColor",strokeOpacity:.2,className:"text-muted-foreground"}),(0,b.jsx)("text",{x:e.x,y:e.y,textAnchor:"middle",dominantBaseline:"middle",className:"fill-muted-foreground text-[10px]",children:a.label})]},`axis-${a.label}`)}),a.map((a,c)=>{let d=e.map((a,b)=>g(f*b,a.values[c]/100*100)),h=d.map((a,b)=>`${0===b?"M":"L"} ${a.x} ${a.y}`).join(" ")+" Z";return(0,b.jsxs)("g",{children:[(0,b.jsx)("path",{d:h,fill:x[c].hex,fillOpacity:.15,stroke:x[c].hex,strokeWidth:2,strokeLinejoin:"round"}),d.map((d,e)=>(0,b.jsx)("circle",{cx:d.x,cy:d.y,r:4,fill:x[c].hex},`point-${a.basic.orgNr}-${e}`))]},a.basic.orgNr)})]})})}function z({companies:a,label:c,values:d}){let e=Math.max(...d.filter(a=>!isNaN(a)),1);return(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:c}),(0,b.jsx)("div",{className:"space-y-1.5",children:a.map((a,c)=>{let f=d[c],g=isNaN(f)?0:Math.abs(f)/e*100,h=f<0;return(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("div",{className:"w-16 text-xs text-muted-foreground truncate",children:[a.basic.name.slice(0,8),"..."]}),(0,b.jsxs)("div",{className:"flex-1 h-6 bg-secondary rounded-full overflow-hidden relative",children:[(0,b.jsx)("div",{className:`absolute h-full rounded-full transition-all duration-500 ${h?"bg-red-500":x[c].bg}`,style:{width:`${g}%`}}),(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-end pr-2",children:(0,b.jsx)("span",{className:`text-xs font-medium ${g>50?"text-white":"text-foreground"}`,children:isNaN(f)?"-":f.toLocaleString("sv-SE")})})]})]},a.basic.orgNr)})})]})}let A=a=>{let b;return a?isNaN(b="number"==typeof a?a:parseInt(a.replace(/\D/g,""),10))?String(a):Math.abs(b)>=1e3?`${(b/1e3).toFixed(0)} MSEK`:`${b} TSEK`:"-"},B=(a,b)=>{let c=a.financials?.keyFigures;if(c)return c[b]},C=a=>{if(null==a)return 0;if("number"==typeof a)return a;let b=parseFloat(a.replace(/[^\d.-]/g,""));return isNaN(b)?0:b},D=a=>{let b=a.financials?.employees;if("number"==typeof b)return b;if("string"==typeof b){let a=parseInt(b,10);return isNaN(a)?0:a}return 0},E=a=>{let b=a.filter(a=>void 0!==a);return 0===b.length?-1:a.indexOf(Math.max(...b))};function F(){let a=(0,d.useSearchParams)().get("companies"),[j,F]=(0,c.useState)([]),[G,H]=(0,c.useState)(!0),[I,J]=(0,c.useState)("visual"),K=(0,c.useMemo)(()=>[{label:"OmsÃ¤ttning",key:"revenue",getValue:a=>A(a.financials?.revenue),getNumeric:a=>C(a.financials?.revenue),unit:"TSEK"},{label:"Resultat",key:"profit",getValue:a=>A(a.financials?.profit),getNumeric:a=>C(a.financials?.profit),unit:"TSEK"},{label:"AnstÃ¤llda",key:"employees",getValue:a=>a.financials?.employees?.toString()||"-",getNumeric:a=>D(a),unit:"st"},{label:"EBITDA",key:"ebitda",getValue:a=>{let b=B(a,"ebitda");return b?`${(b/1e3).toFixed(0)} MSEK`:"-"},getNumeric:a=>B(a,"ebitda")??0,unit:"TSEK"},{label:"Avkastning EK",key:"returnOnEquity",getValue:a=>{let b=B(a,"returnOnEquity");return b?`${b.toFixed(1)}%`:"-"},getNumeric:a=>B(a,"returnOnEquity")??0,unit:"%"},{label:"TillvÃ¤xt",key:"growthRate",getValue:a=>{let b=B(a,"growthRate");return b?`${b>=0?"+":""}${b.toFixed(1)}%`:"-"},getNumeric:a=>B(a,"growthRate")??0,unit:"%"},{label:"Soliditet",key:"solidityRatio",getValue:a=>{let b=B(a,"solidityRatio");return b?`${b.toFixed(1)}%`:"-"},getNumeric:a=>B(a,"solidityRatio")??0,unit:"%"}],[]),L=(0,c.useMemo)(()=>[{label:"OmsÃ¤ttning",getValue:a=>C(a.financials?.revenue)},{label:"Resultat",getValue:a=>C(a.financials?.profit)},{label:"AnstÃ¤llda",getValue:a=>D(a)},{label:"Avkastning",getValue:a=>B(a,"returnOnEquity")??0},{label:"TillvÃ¤xt",getValue:a=>B(a,"growthRate")??0}],[]),M=(0,c.useMemo)(()=>{if(0===j.length)return{};let a={};return K.forEach(b=>{let c=E(j.map(a=>b.getNumeric(a)));c>=0&&(a[b.key]=c)}),a},[j,K]),N=(0,c.useMemo)(()=>{if(0===j.length)return[];let a=j.map(()=>0);return Object.values(M).forEach(b=>{b>=0&&b<a.length&&a[b]++}),a},[M,j]);(0,c.useEffect)(()=>{(async()=>{if(!a)return;let b=a.split(",").slice(0,3);H(!0),F((await Promise.all(b.map(async a=>{try{let b=await fetch(`/api/bolag/company/${a}`);if(b.ok)return b.json();return null}catch{return null}}))).filter(Boolean)),H(!1)})()},[a]);let O=[{label:"Grundat",icon:r.Calendar,getValue:a=>a.basic.foundationYear||"-"},{label:"Bransch",icon:k.Building2,getValue:a=>a.industries?.[0]?.name||"-"},{label:"Ort",icon:s.MapPin,getValue:a=>a.location?.municipality||a.domicile?.municipality||"-"},{label:"VD",icon:q.Users,getValue:a=>a.people?.ceo?.name||"-"}],P=(a,c=!1)=>void 0===a?(0,b.jsx)(o.Minus,{className:"w-3 h-3 text-muted-foreground"}):c&&a<0?(0,b.jsx)(n.TrendingDown,{className:"w-3 h-3 text-red-500"}):(0,b.jsx)(m.TrendingUp,{className:"w-3 h-3 text-emerald-500"});return a?G?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"grid gap-4 md:grid-cols-3",children:[1,2,3].map(a=>(0,b.jsx)(f.Card,{children:(0,b.jsxs)(f.CardContent,{className:"p-6",children:[(0,b.jsx)(i.Skeleton,{className:"h-6 w-40 mb-2"}),(0,b.jsx)(i.Skeleton,{className:"h-4 w-24 mb-4"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(i.Skeleton,{className:"h-4 w-full"}),(0,b.jsx)(i.Skeleton,{className:"h-4 w-full"}),(0,b.jsx)(i.Skeleton,{className:"h-4 w-3/4"})]})]})},`compare-skeleton-${a}`))}),(0,b.jsx)(i.Skeleton,{className:"h-96"})]}):(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(g.Button,{variant:"visual"===I?"default":"outline",size:"sm",onClick:()=>J("visual"),className:"gap-2",children:[(0,b.jsx)(t.BarChart3,{className:"w-4 h-4"}),"Visuell"]}),(0,b.jsxs)(g.Button,{variant:"table"===I?"default":"outline",size:"sm",onClick:()=>J("table"),className:"gap-2",children:[(0,b.jsx)(l.Scale,{className:"w-4 h-4"}),"Tabell"]})]}),(0,b.jsx)("div",{className:"flex items-center gap-3",children:j.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsx)("div",{className:`w-3 h-3 rounded-full ${x[c].bg}`}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground truncate max-w-[100px]",children:a.basic.name})]},a.basic.orgNr))})]}),(0,b.jsx)("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:j.map((a,c)=>{var d;let g;return(0,b.jsx)(f.Card,{className:`group transition-all ${x[c].light} border-2 ${N[c]===Math.max(...N)?"border-amber-400 dark:border-amber-500":"border-transparent"}`,children:(0,b.jsxs)(f.CardHeader,{className:"pb-3",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("div",{className:`w-3 h-3 rounded-full ${x[c].bg}`}),(0,b.jsx)(e.default,{href:`/bolag/${a.basic.orgNr}`,className:"group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:(0,b.jsx)(f.CardTitle,{className:"text-lg truncate",children:a.basic.name})})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground font-mono",children:10===(g=(d=a.basic.orgNr).replace(/\D/g,"")).length?`${g.slice(0,6)}-${g.slice(6)}`:d})]}),(0,b.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,b.jsx)(h.Badge,{variant:a.basic.status.active?"default":"secondary",className:a.basic.status.active?"bg-emerald-500/90 hover:bg-emerald-500 shrink-0":"shrink-0",children:a.basic.status.active?"Aktiv":a.basic.status.status}),N[c]>0&&(0,b.jsxs)("div",{className:"flex items-center gap-1 text-amber-600 dark:text-amber-400",children:[(0,b.jsx)(u.Trophy,{className:"w-3.5 h-3.5"}),(0,b.jsxs)("span",{className:"text-xs font-medium",children:[N[c]," vinster"]})]})]})]}),(0,b.jsx)("div",{className:"mt-3 pt-3 border-t border-border/50 space-y-1.5",children:O.slice(0,3).map(c=>{let d=c.icon;return(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(d,{className:"w-3.5 h-3.5 text-muted-foreground shrink-0"}),(0,b.jsxs)("span",{className:"text-muted-foreground",children:[c.label,":"]}),(0,b.jsx)("span",{className:"font-medium text-foreground truncate",children:c.getValue(a)})]},c.label)})}),(0,b.jsxs)(e.default,{href:`/bolag/${a.basic.orgNr}`,className:"mt-3 inline-flex items-center gap-1 text-xs text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:["Visa fullstÃ¤ndig profil",(0,b.jsx)(p.ArrowRight,{className:"w-3 h-3"})]})]})},a.basic.orgNr)})}),"visual"===I?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{className:"border-b border-border",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(v.Target,{className:"w-5 h-5 text-muted-foreground"}),(0,b.jsx)(f.CardTitle,{children:"Ã–vergripande jÃ¤mfÃ¶relse"})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Visualisering av relativa styrkor inom olika omrÃ¥den"})]}),(0,b.jsx)(f.CardContent,{className:"py-6",children:(0,b.jsx)(y,{companies:j,metrics:L})})]}),(0,b.jsx)("div",{className:"grid gap-6 md:grid-cols-2",children:K.slice(0,6).map(a=>(0,b.jsx)(f.Card,{children:(0,b.jsx)(f.CardContent,{className:"p-4",children:(0,b.jsx)(z,{companies:j,label:a.label,values:j.map(b=>a.getNumeric(b)??0)})})},a.key))})]}):(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{className:"border-b border-border",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(l.Scale,{className:"w-5 h-5 text-muted-foreground"}),(0,b.jsx)(f.CardTitle,{children:"NyckeltalsjÃ¤mfÃ¶relse"})]})}),(0,b.jsx)(f.CardContent,{className:"p-0",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"financial-table w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"w-40",children:"Nyckeltal"}),j.map((a,c)=>(0,b.jsx)("th",{children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)("div",{className:`w-2 h-2 rounded-full ${x[c].bg}`}),(0,b.jsx)("span",{className:"hidden sm:inline",children:a.basic.name.length>20?`${a.basic.name.slice(0,20)}...`:a.basic.name}),(0,b.jsx)("span",{className:"sm:hidden",children:a.basic.name.length>10?`${a.basic.name.slice(0,10)}...`:a.basic.name})]})},a.basic.orgNr))]})}),(0,b.jsx)("tbody",{children:K.map(a=>{let c=j.map(b=>a.getNumeric(b)),d=E(c);return(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"font-medium",children:a.label}),j.map((e,f)=>{let g=a.getValue(e),h=c[f]??0,i=d===f&&0!==h,j=g.startsWith("-")||g.startsWith("âˆ’");return(0,b.jsx)("td",{className:`${i?"text-emerald-600 dark:text-emerald-400 font-semibold":j?"text-red-600 dark:text-red-400":""}`,children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-1.5",children:["profit"===a.key&&0!==h&&P(h,!0),"growthRate"===a.key&&0!==h&&P(h),g,i&&(0,b.jsx)("span",{className:"text-xs ml-1",children:"ðŸ†"})]})},e.basic.orgNr)})]},a.label)})})]})})})]}),(0,b.jsx)(f.Card,{className:"bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 border-indigo-200 dark:border-indigo-800",children:(0,b.jsxs)(f.CardContent,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(w.Zap,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"}),(0,b.jsx)("h3",{className:"font-semibold text-foreground",children:"Sammanfattning"})]}),(0,b.jsx)("div",{className:"grid gap-4 sm:grid-cols-3",children:j.map((a,c)=>{let d=Object.entries(M).filter(([a,b])=>b===c).map(([a])=>K.find(b=>b.key===a)?.label||a);return(0,b.jsxs)("div",{className:"p-4 rounded-lg bg-white/60 dark:bg-gray-800/60",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)("div",{className:`w-3 h-3 rounded-full ${x[c].bg}`}),(0,b.jsx)("span",{className:"font-medium text-sm truncate",children:a.basic.name})]}),d.length>0?(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:d.map(a=>(0,b.jsxs)(h.Badge,{variant:"secondary",className:"text-xs bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300",children:["ðŸ† ",a]},a))}):(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"Inga toppnoteringar"})]},a.basic.orgNr)})})]})}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{className:"border-b border-border",children:(0,b.jsx)(f.CardTitle,{className:"text-lg",children:"Status & Flaggor"})}),(0,b.jsx)(f.CardContent,{className:"pt-6",children:(0,b.jsx)("div",{className:"grid gap-6",style:{gridTemplateColumns:`repeat(${j.length}, 1fr)`},children:j.map((a,c)=>(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)("div",{className:`w-2 h-2 rounded-full ${x[c].bg}`}),(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground truncate",children:a.basic.name})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[a.flags?.paymentRemarks&&(0,b.jsxs)(h.Badge,{variant:"destructive",className:"gap-1",children:[(0,b.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-current"}),"BetalningsanmÃ¤rkningar"]}),a.flags?.gaselle&&(0,b.jsx)(h.Badge,{className:"bg-gradient-to-r from-amber-400 to-yellow-500 text-white border-0",children:"â­ GasellfÃ¶retag"}),a.flags?.vatRegistered&&(0,b.jsx)(h.Badge,{variant:"outline",className:"text-emerald-600 border-emerald-300 dark:text-emerald-400 dark:border-emerald-700",children:"Momsregistrerad"}),a.flags?.registeredForPayrollTax&&(0,b.jsx)(h.Badge,{variant:"outline",children:"Arbetsgivaravgift"}),a.flags?.mortgages&&(0,b.jsx)(h.Badge,{variant:"secondary",className:"text-amber-700 dark:text-amber-400",children:"FÃ¶retagsinteckningar"}),!a.flags?.paymentRemarks&&!a.flags?.gaselle&&!a.flags?.vatRegistered&&!a.flags?.registeredForPayrollTax&&!a.flags?.mortgages&&(0,b.jsx)("span",{className:"text-sm text-muted-foreground/70 italic",children:"Inga sÃ¤rskilda flaggor"})]})]},a.basic.orgNr))})})]}),(0,b.jsx)("div",{className:"flex justify-center pt-4",children:(0,b.jsx)(e.default,{href:"/bolag",children:(0,b.jsxs)(g.Button,{variant:"outline",className:"gap-2",children:[(0,b.jsx)(k.Building2,{className:"w-4 h-4"}),"SÃ¶k fler fÃ¶retag"]})})})]}):(0,b.jsx)(f.Card,{className:"border-dashed",children:(0,b.jsxs)(f.CardContent,{className:"py-16 text-center",children:[(0,b.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-secondary mb-4",children:(0,b.jsx)(l.Scale,{className:"w-8 h-8 text-muted-foreground"})}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Inga fÃ¶retag valda"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:"VÃ¤lj upp till 3 fÃ¶retag att jÃ¤mfÃ¶ra genom att klicka pÃ¥ jÃ¤mfÃ¶relseknappen pÃ¥ bolagssidan."}),(0,b.jsx)(e.default,{href:"/bolag",children:(0,b.jsxs)(g.Button,{className:"gap-2",children:[(0,b.jsx)(k.Building2,{className:"w-4 h-4"}),"SÃ¶k fÃ¶retag"]})})]})})}function G(){return(0,b.jsx)("main",{className:"min-h-screen bg-background text-foreground",children:(0,b.jsxs)("div",{className:"page-wrapper page-content max-w-6xl",children:[(0,b.jsx)(j.Breadcrumbs,{items:[{label:"Hem",href:"/"},{label:"Bolag",href:"/bolag"},{label:"JÃ¤mfÃ¶r"}]}),(0,b.jsxs)("header",{className:"page-header",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg bg-indigo-500/10 dark:bg-indigo-500/20 flex items-center justify-center",children:(0,b.jsx)(l.Scale,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),(0,b.jsx)("h1",{className:"text-display",children:"JÃ¤mfÃ¶r fÃ¶retag"})]}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"JÃ¤mfÃ¶r nyckeltal och information sida vid sida med interaktiva visualiseringar"})]}),(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)(i.Skeleton,{className:"h-64 w-full"}),children:(0,b.jsx)(F,{})})]})})}a.s(["default",()=>G])}];

//# debugId=ffe4cd36-92c4-2a91-2bc4-1a060792943c
//# sourceMappingURL=CLAUDE_projects_1_%20Loop%20Desk_src_app_bolag_compare_page_tsx_96d6c529._.js.map