{
  "version": 3,
  "sources": [],
  "debugId": "911246e3-c585-aa5f-22f9-6848a28f08bf",
  "sections": [
    {"offset": {"line": 1, "column": 0}, "map": {"version":3,"sources":["../../../../../../CLAUDE/projects/1.%20Loop%20Desk/src/lib/kungorelser/scraper.ts","../../../../../../CLAUDE/projects/1.%20Loop%20Desk/src/lib/kungorelser/session-manager.ts","../../../../../../CLAUDE/projects/1.%20Loop%20Desk/src/lib/kungorelser/index.ts"],"sourcesContent":["/**\n * Kungörelser Scraper - Adapted from Electron Bolags app for Next.js/Railway\n *\n * Scrapes company announcements from Bolagsverket POIT\n * https://poit.bolagsverket.se/poit-app/sok\n *\n * Features (matching original Electron app):\n * - 2captcha integration for CAPTCHA solving\n * - Smart proxy activation based on blocking stats\n * - Session persistence to reduce CAPTCHAs\n */\n\nimport type { BrowserContext, Page } from 'playwright-core';\nimport type { Announcement, ScrapedResult, SearchOptions } from './types';\nimport { proxyManager } from './proxy-manager';\nimport { sessionManager } from './session-manager';\nimport { forceRefreshProxies } from './proxy-init';\nimport { existsSync, readdirSync } from 'fs';\nimport { join } from 'path';\n\nconst START_URL = \"https://poit.bolagsverket.se/poit-app/sok\";\n\n// Find Chromium executable path for playwright-core\nfunction findChromiumPath(): string | undefined {\n  const browsersPath = process.env.PLAYWRIGHT_BROWSERS_PATH || '/ms-playwright';\n\n  try {\n    const dirs = readdirSync(browsersPath);\n\n    // First, try to find full chromium (preferred)\n    for (const dir of dirs) {\n      if (dir.startsWith('chromium-') && !dir.includes('headless')) {\n        const chromePath = join(browsersPath, dir, 'chrome-linux', 'chrome');\n        if (existsSync(chromePath)) {\n          console.log('[Scraper] Found full Chromium at:', chromePath);\n          return chromePath;\n        }\n      }\n    }\n\n    // Fallback to headless shell\n    for (const dir of dirs) {\n      if (dir.startsWith('chromium_headless_shell-')) {\n        // The headless shell has a different path structure\n        const headlessPath = join(browsersPath, dir, 'chrome-headless-shell-linux64', 'chrome-headless-shell');\n        if (existsSync(headlessPath)) {\n          console.log('[Scraper] Found headless shell at:', headlessPath);\n          return headlessPath;\n        }\n      }\n    }\n  } catch (e) {\n    console.warn('[Scraper] Could not search for Chromium:', e);\n  }\n\n  return undefined;\n}\nconst DETAIL_TEXT_WORD_LIMIT = 100;\nconst DETAIL_TEXT_CHAR_LIMIT = 1000;\n\n// 2captcha API configuration from environment\nconst TWOCAPTCHA_API_KEY = process.env.TWOCAPTCHA_API_KEY || '';\n\n// Scraper configuration\nconst SCRAPER_CONFIG = {\n  // Delay between requests (ms) - increased from 2000 to match Electron\n  detailDelayMs: parseInt(process.env.SCRAPER_DETAIL_DELAY_MS || '3000', 10),\n  // Concurrency for detail fetching\n  detailConcurrency: parseInt(process.env.SCRAPER_DETAIL_CONCURRENCY || '5', 10),\n  // Maximum retries for captcha\n  maxCaptchaRetries: parseInt(process.env.SCRAPER_MAX_CAPTCHA_RETRIES || '10', 10),\n  // Maximum retries for detail fetch\n  maxDetailRetries: parseInt(process.env.SCRAPER_MAX_DETAIL_RETRIES || '5', 10),\n  // Timeout for navigation (ms) - increased to handle slow Bolagsverket pages\n  navigationTimeout: parseInt(process.env.SCRAPER_NAVIGATION_TIMEOUT || '90000', 10),\n  // Enable proxy for scraping\n  useProxy: process.env.SCRAPER_USE_PROXY === 'true',\n};\n\n/**\n * Build query variants for better search coverage\n */\nexport function buildQueryVariants(query: string): string[] {\n  const trimmed = (query || \"\").trim();\n  const variants = trimmed ? [trimmed] : [];\n  const digits = trimmed.replace(/\\D/g, \"\");\n\n  // Add org number variants\n  if (digits.length === 10) {\n    const dashed = `${digits.slice(0, 6)}-${digits.slice(6)}`;\n    if (dashed !== trimmed) variants.push(dashed);\n    if (digits !== trimmed) variants.push(digits);\n  }\n\n  // Add name-only variant\n  if (/[a-zA-Z]/.test(trimmed)) {\n    const nameOnly = trimmed.replace(/[0-9\\-]+/g, \" \").replace(/\\s+/g, \" \").trim();\n    if (nameOnly && nameOnly !== trimmed) variants.push(nameOnly);\n  }\n\n  return Array.from(new Set(variants));\n}\n\n/**\n * Count words in text\n */\nfunction countWords(text: string): number {\n  if (!text) return 0;\n  return text.trim().split(/\\s+/).filter(Boolean).length;\n}\n\n/**\n * Check if text is long (needs truncation)\n */\nfunction isLongText(text: string): boolean {\n  if (!text) return false;\n  return countWords(text) > DETAIL_TEXT_WORD_LIMIT || text.trim().length > DETAIL_TEXT_CHAR_LIMIT;\n}\n\n/**\n * Truncate text to word limit\n */\nfunction truncateWords(text: string, limit: number): string {\n  if (!text) return \"\";\n  const words = text.trim().split(/\\s+/);\n  if (words.length <= limit) return text.trim();\n  return `${words.slice(0, limit).join(\" \")} ...`;\n}\n\n/**\n * Format text as markdown\n */\nexport function formatTextAsMarkdown(text: string): string {\n  if (!text) return \"\";\n  const lines = text.split(/\\r?\\n/);\n  const output: string[] = [];\n  let started = false;\n  let pendingList = false;\n\n  function isHeadingCandidate(line: string): boolean {\n    if (!line) return false;\n    if (line.length > 160) return false;\n    if (/^(https?:|www\\.)/i.test(line)) return false;\n    if (/^[-*•–]\\s+/.test(line)) return false;\n    if (/^\\d+[.)]\\s+/.test(line)) return false;\n    if (/[.!?]$/.test(line)) return false;\n    if (line.endsWith(\":\")) return line.length <= 50;\n    return true;\n  }\n\n  for (const rawLine of lines) {\n    const line = rawLine.replace(/\\s+/g, \" \").trim();\n    if (!line) {\n      if (output.length && output[output.length - 1] !== \"\") output.push(\"\");\n      pendingList = false;\n      continue;\n    }\n\n    if (!started) {\n      output.push(`# ${line}`);\n      started = true;\n      pendingList = false;\n      continue;\n    }\n\n    if (isHeadingCandidate(line)) {\n      if (output.length && output[output.length - 1] !== \"\") output.push(\"\");\n      output.push(`## ${line.replace(/:$/, \"\")}`);\n      pendingList = false;\n      continue;\n    }\n\n    let normalized = line;\n    let isListItem = false;\n    const bulletMatch = line.match(/^[-*•–]\\s+(.*)$/);\n    if (bulletMatch) {\n      normalized = bulletMatch[1].trim();\n      isListItem = true;\n    }\n    const orderedMatch = line.match(/^\\d+[.)]\\s+(.*)$/);\n    if (orderedMatch) {\n      normalized = orderedMatch[1].trim();\n      isListItem = true;\n    }\n    if (!isListItem && pendingList) {\n      isListItem = true;\n    }\n\n    if (isListItem) {\n      output.push(`- ${normalized}`);\n    } else {\n      output.push(line);\n    }\n    pendingList = line.endsWith(\":\");\n  }\n\n  return output.join(\"\\n\").replace(/\\n{3,}/g, \"\\n\\n\");\n}\n\n/**\n * Check 2captcha balance\n */\nasync function check2CaptchaBalance(): Promise<number> {\n  if (!TWOCAPTCHA_API_KEY) {\n    return 0;\n  }\n\n  try {\n    const balanceUrl = new URL(\"https://2captcha.com/res.php\");\n    balanceUrl.searchParams.set(\"key\", TWOCAPTCHA_API_KEY);\n    balanceUrl.searchParams.set(\"action\", \"getbalance\");\n    balanceUrl.searchParams.set(\"json\", \"1\");\n\n    const response = await fetch(balanceUrl.toString());\n    const result = await response.json();\n\n    if (result.status === 1) {\n      return parseFloat(result.request);\n    }\n    return 0;\n  } catch (error) {\n    console.error(\"Failed to check 2captcha balance:\", error);\n    return 0;\n  }\n}\n\n/**\n * Solve CAPTCHA using 2captcha API\n */\nasync function solveCaptcha(imageBase64: string): Promise<string> {\n  if (!TWOCAPTCHA_API_KEY) {\n    console.warn(\"CAPTCHA: TWOCAPTCHA_API_KEY not configured - captcha solving disabled\");\n    throw new Error(\"TWOCAPTCHA_API_KEY not configured. Set this environment variable to enable captcha solving.\");\n  }\n\n  // Check balance before solving\n  const balance = await check2CaptchaBalance();\n  if (balance < 0.001) {\n    console.warn(\"CAPTCHA: 2captcha balance too low:\", balance);\n    throw new Error(`2captcha balance too low: $${balance}. Please top up your account.`);\n  }\n\n  console.log(\"CAPTCHA: Submitting to 2captcha (balance: $\" + balance.toFixed(3) + \")\");\n\n  // Submit captcha\n  const submitUrl = new URL(\"https://2captcha.com/in.php\");\n  submitUrl.searchParams.set(\"key\", TWOCAPTCHA_API_KEY);\n  submitUrl.searchParams.set(\"method\", \"base64\");\n  submitUrl.searchParams.set(\"json\", \"1\");\n\n  // Extract base64 data from data URL if present\n  const base64Data = imageBase64.includes(\"base64,\")\n    ? imageBase64.split(\"base64,\")[1]\n    : imageBase64;\n\n  const submitResponse = await fetch(submitUrl.toString(), {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\n    },\n    body: new URLSearchParams({ body: base64Data }),\n  });\n\n  const submitResult = await submitResponse.json();\n  if (submitResult.status !== 1) {\n    console.error(\"CAPTCHA: Submit failed:\", submitResult);\n    throw new Error(`2captcha submit failed: ${submitResult.request}`);\n  }\n\n  const captchaId = submitResult.request;\n  console.log(\"CAPTCHA: Submitted, ID:\", captchaId);\n\n  // Poll for result\n  const resultUrl = new URL(\"https://2captcha.com/res.php\");\n  resultUrl.searchParams.set(\"key\", TWOCAPTCHA_API_KEY);\n  resultUrl.searchParams.set(\"action\", \"get\");\n  resultUrl.searchParams.set(\"id\", captchaId);\n  resultUrl.searchParams.set(\"json\", \"1\");\n\n  for (let i = 0; i < 30; i++) {\n    await new Promise(resolve => setTimeout(resolve, 2000));\n\n    const resultResponse = await fetch(resultUrl.toString());\n    const result = await resultResponse.json();\n\n    if (result.status === 1) {\n      console.log(\"CAPTCHA: Solved successfully\");\n      return result.request;\n    }\n\n    if (result.request !== \"CAPCHA_NOT_READY\") {\n      console.error(\"CAPTCHA: Failed:\", result);\n      throw new Error(`2captcha failed: ${result.request}`);\n    }\n\n    console.log(\"CAPTCHA: Waiting for solution... attempt\", i + 1);\n  }\n\n  throw new Error(\"2captcha timeout after 60 seconds\");\n}\n\n/**\n * Handle CAPTCHA blocker on page\n */\nasync function solveBlocker(page: Page): Promise<boolean> {\n  for (let attempt = 1; attempt <= 10; attempt++) {\n    const blocked = await page.evaluate(() => {\n      const body = document.body ? document.body.innerText : \"\";\n      return Boolean(document.querySelector(\"#ans\")) || body.includes(\"human visitor\");\n    });\n\n    if (!blocked) {\n      proxyManager.recordSuccess(); // Reset consecutive counter on success\n      return true;\n    }\n\n    // Record CAPTCHA encounter for proxy manager\n    proxyManager.recordCaptcha();\n    console.log(`CAPTCHA: block detected, attempt ${attempt}`);\n\n    const imgSrc = await page.evaluate(() => {\n      const img = Array.from(document.querySelectorAll(\"img\")).find((i) =>\n        (i.src || \"\").includes(\"base64\")\n      );\n      return img ? img.src : null;\n    });\n\n    if (!imgSrc) {\n      // Use goto instead of reload with timeout\n      await page.goto(page.url(), {\n        waitUntil: \"domcontentloaded\",\n        timeout: SCRAPER_CONFIG.navigationTimeout\n      }).catch(() => {});\n      await page.waitForTimeout(3000);\n      continue;\n    }\n\n    try {\n      const guess = await solveCaptcha(imgSrc);\n      console.log(`CAPTCHA: solved with answer '${guess}'`);\n\n      const input = page.locator(\"#ans\");\n      await input.fill(guess);\n      await page.locator(\"#jar\").click();\n      await page.waitForTimeout(5000);\n\n      // After CAPTCHA is solved, navigate to search page to establish clean session\n      // Use domcontentloaded instead of networkidle - networkidle hangs through proxy\n      console.log('CAPTCHA: navigating to search page after solve');\n      await page.goto(START_URL, {\n        waitUntil: \"domcontentloaded\",\n        timeout: SCRAPER_CONFIG.navigationTimeout\n      }).catch((err) => {\n        console.warn('CAPTCHA: navigation after solve failed:', err);\n      });\n      console.log('CAPTCHA: navigation complete, waiting for page to stabilize');\n      await page.waitForTimeout(3000);\n    } catch (err) {\n      console.warn(`CAPTCHA: solve failed:`, err);\n      // Use goto instead of reload with timeout\n      await page.goto(page.url(), {\n        waitUntil: \"domcontentloaded\",\n        timeout: SCRAPER_CONFIG.navigationTimeout\n      }).catch(() => {});\n      await page.waitForTimeout(3000);\n    }\n  }\n\n  return false;\n}\n\n/**\n * Dismiss cookie consent banner if present\n */\nasync function dismissCookieBanner(page: Page): Promise<void> {\n  try {\n    const selectors = [\n      'button[data-cookiefirst-action=\"reject\"]',\n      'button[data-cookiefirst-action=\"accept\"]',\n      '.cookiefirst-root button',\n      'dialog[aria-label*=\"Cookie\"] button',\n      '[class*=\"cookie\"] button:first-of-type',\n    ];\n\n    for (const selector of selectors) {\n      const btn = page.locator(selector).first();\n      if (await btn.count() > 0 && await btn.isVisible()) {\n        await btn.click({ timeout: 3000 }).catch(() => {});\n        await page.waitForTimeout(500);\n        console.log(\"COOKIE: dismissed banner\");\n        return;\n      }\n    }\n\n    // Try Escape key\n    await page.keyboard.press(\"Escape\");\n    await page.waitForTimeout(300);\n  } catch {\n    // Ignore - banner might not exist\n  }\n}\n\n/**\n * Navigate to search page if needed\n */\nasync function maybeNavigateToSearch(page: Page): Promise<boolean> {\n  // First dismiss any cookie banners\n  await dismissCookieBanner(page);\n\n  const currentUrl = page.url();\n  console.log(`NAV: current URL is '${currentUrl}'`);\n\n  const hasNameField = await page.$(\"#namn\");\n  const hasOrgField = await page.$(\"#personOrgnummer\");\n  if (hasNameField || hasOrgField) {\n    console.log(\"NAV: search form already present\");\n    return true;\n  }\n\n  console.log(\"NAV: opening search form...\");\n  const link = page.getByRole(\"link\", { name: /Sök kungörelse/i });\n  const linkCount = await link.count();\n  console.log(`NAV: found ${linkCount} 'Sök kungörelse' links`);\n\n  if (linkCount > 0) {\n    try {\n      await Promise.all([\n        link.first().click({ timeout: 5000 }),\n        page.waitForURL(/\\/poit-app\\/sok/, { timeout: 15000 }).catch(() => {}),\n      ]);\n      console.log(`NAV: after click, URL is '${page.url()}'`);\n    } catch (err) {\n      console.warn(\"NAV: click failed, trying force click:\", err);\n      // Try force click if blocked\n      await link.first().click({ force: true, timeout: 5000 }).catch(() => {});\n    }\n  } else {\n    console.log(\"NAV: no link found via getByRole, trying evaluate fallback\");\n    const clicked = await page.evaluate(() => {\n      const a = Array.from(document.querySelectorAll(\"a\")).find((el) =>\n        ((el as HTMLAnchorElement).innerText || \"\").includes(\"Sök kungörelse\")\n      );\n      if (a) {\n        (a as HTMLAnchorElement).click();\n        return true;\n      }\n      return false;\n    });\n    console.log(`NAV: evaluate click result: ${clicked}`);\n  }\n  // Wait longer for Angular app to load\n  await page.waitForTimeout(2000);\n\n  // Try waiting for input to appear\n  try {\n    await page.waitForSelector('#namn, #personOrgnummer', { timeout: 10000 });\n    console.log(\"NAV: input selector appeared\");\n  } catch {\n    console.log(\"NAV: input selector did not appear within 10s\");\n  }\n\n  const hasNameFieldAfter = await page.$(\"#namn\");\n  const hasOrgFieldAfter = await page.$(\"#personOrgnummer\");\n  const result = Boolean(hasNameFieldAfter || hasOrgFieldAfter);\n  console.log(`NAV: after navigation - namn:${!!hasNameFieldAfter}, org:${!!hasOrgFieldAfter}, result:${result}`);\n  return result;\n}\n\n/**\n * Wait for search inputs to be ready\n */\nasync function waitForSearchInputs(page: Page): Promise<void> {\n  await page.waitForFunction(\n    () =>\n      document.querySelector(\"#namn\") ||\n      document.querySelector(\"#personOrgnummer\") ||\n      document.querySelector('input[placeholder*=\"Företagsnamn\"]') ||\n      document.querySelector('input[placeholder*=\"Org\"]') ||\n      document.querySelector('input[name*=\"namn\"]') ||\n      document.querySelector('input[name*=\"org\"]'),\n    { timeout: 15000 }\n  ).catch(() => {});\n}\n\n/**\n * Submit search form\n */\nasync function submitSearch(page: Page, query: string): Promise<boolean | 'disabled'> {\n  const digits = query.replace(/\\D/g, \"\");\n  const isOrg = digits.length >= 10;\n  const queryToFill = isOrg\n    ? digits.length >= 10\n      ? `${digits.slice(0, 6)}-${digits.slice(6, 10)}`\n      : digits\n    : query;\n\n  const selectors = isOrg\n    ? [\"#personOrgnummer\", 'input[name*=\"org\"]', 'input[placeholder*=\"Org\"]']\n    : [\"#namn\", 'input[name*=\"namn\"]', 'input[placeholder*=\"Företagsnamn\"]'];\n\n  let input = null;\n  for (const sel of selectors) {\n    const loc = page.locator(sel);\n    const count = await loc.count();\n    console.log(`SEARCH: checking selector '${sel}' - found ${count} elements`);\n    if (count > 0) {\n      input = loc.first();\n      break;\n    }\n  }\n\n  if (!input) {\n    // Debug: Log what's on the page\n    const pageState = await page.evaluate(() => {\n      const allInputs = Array.from(document.querySelectorAll('input')).map(i => ({\n        id: i.id,\n        name: i.name,\n        type: i.type,\n        placeholder: i.placeholder\n      }));\n      const url = window.location.href;\n      const bodyText = document.body?.innerText?.substring(0, 500) || '';\n      return { url, allInputs, bodyText };\n    });\n    console.warn(\"SEARCH: input not found. Page state:\", JSON.stringify(pageState));\n    return false;\n  }\n\n  // Use JavaScript to set the value directly - works better with Angular\n  const inputSelector = isOrg ? \"#personOrgnummer\" : \"#namn\";\n  console.log(`SEARCH: setting value via JS for selector '${inputSelector}' with '${queryToFill}'`);\n\n  await page.evaluate(({ selector, value }) => {\n    const el = document.querySelector(selector) as HTMLInputElement;\n    if (!el) {\n      console.error('Input not found:', selector);\n      return;\n    }\n\n    // Focus the input\n    el.focus();\n\n    // Set the value using native setter to trigger Angular's change detection\n    const nativeInputValueSetter = Object.getOwnPropertyDescriptor(\n      window.HTMLInputElement.prototype,\n      'value'\n    )?.set;\n    if (nativeInputValueSetter) {\n      nativeInputValueSetter.call(el, value);\n    } else {\n      el.value = value;\n    }\n\n    // Dispatch events that Angular listens to\n    el.dispatchEvent(new Event('input', { bubbles: true, cancelable: true }));\n    el.dispatchEvent(new Event('change', { bubbles: true, cancelable: true }));\n    el.dispatchEvent(new KeyboardEvent('keyup', { bubbles: true }));\n\n    // Trigger Angular's change detection\n    const ngModelController = (el as any).ngModel;\n    if (ngModelController) {\n      ngModelController.$setViewValue(value);\n    }\n\n    // Also try dispatching a custom event that Angular might listen to\n    el.dispatchEvent(new CustomEvent('ngModelChange', { detail: value, bubbles: true }));\n\n    el.blur();\n  }, { selector: inputSelector, value: queryToFill });\n\n  // Wait for Angular to process\n  await page.waitForTimeout(500);\n\n  // Debug: Verify the input value was set\n  const inputValue = await page.evaluate((selector) => {\n    const el = document.querySelector(selector) as HTMLInputElement;\n    return el ? el.value : null;\n  }, inputSelector);\n  console.log(`SEARCH: input value is now '${inputValue}'`);\n\n  // If still empty, try clicking and typing as fallback\n  if (!inputValue) {\n    console.log('SEARCH: JS set failed, trying click + type fallback');\n    await input.click();\n    await page.waitForTimeout(200);\n    await page.keyboard.type(queryToFill, { delay: 30 });\n    await page.waitForTimeout(300);\n\n    const fallbackValue = await page.evaluate((selector) => {\n      const el = document.querySelector(selector) as HTMLInputElement;\n      return el ? el.value : null;\n    }, inputSelector);\n    console.log(`SEARCH: fallback input value is now '${fallbackValue}'`);\n  }\n\n  console.log(\"SEARCH: clicking search button...\");\n  const button = page.getByRole(\"button\", { name: /Sök kungörelse/i });\n  if (await button.count()) {\n    const enabled = await button.first().isEnabled();\n    if (!enabled) {\n      console.warn(\"SEARCH: search button disabled, query likely invalid.\");\n      return \"disabled\";\n    }\n    await button.first().click();\n    console.log(\"SEARCH: button clicked via getByRole\");\n  } else {\n    const clicked = await page.evaluate(() => {\n      const btn = Array.from(document.querySelectorAll(\"button\")).find((b) =>\n        ((b as HTMLButtonElement).innerText || \"\").includes(\"Sök kungörelse\")\n      );\n      if (btn) {\n        (btn as HTMLButtonElement).click();\n        return true;\n      }\n      return false;\n    });\n    console.log(\"SEARCH: button clicked via evaluate:\", clicked);\n  }\n\n  // Debug: Wait a moment and check URL/page state after click\n  await page.waitForTimeout(2000);\n  const postClickState = await page.evaluate(() => {\n    const url = window.location.href;\n    const body = document.body?.innerText || '';\n    const hasSearchForm = document.querySelector('#namn') !== null || document.querySelector('#personOrgnummer') !== null;\n    const hasResults = body.includes('Antal träffar') || body.includes('inga träffar');\n    const isLoading = body.includes('Laddar') || body.includes('Söker');\n    const bodyPreview = body.substring(0, 300).replace(/\\s+/g, ' ');\n    return { url, hasSearchForm, hasResults, isLoading, bodyPreview };\n  });\n  console.log(\"SEARCH: post-click state:\", JSON.stringify(postClickState));\n\n  return true;\n}\n\n/**\n * Collect results from search results page\n */\nasync function collectResults(page: Page): Promise<ScrapedResult[]> {\n  const items = await page.evaluate(() => {\n    const seen = new Set<string>();\n    const results: Array<{\n      id: string;\n      url: string;\n      cells: string[];\n      rowText: string;\n    }> = [];\n\n    const links = Array.from(document.querySelectorAll('a[href*=\"kungorelse/\"]'));\n    for (const link of links) {\n      const href = link.getAttribute(\"href\") || \"\";\n      const id = href.split(\"/\").pop()?.split(\"?\")[0] || \"\";\n      if (!id || seen.has(id)) continue;\n      seen.add(id);\n\n      const row = link.closest(\"tr\") || link.closest(\"[role=row]\") || link.closest(\"div\");\n      let cells: string[] = [];\n      if (row) {\n        cells = Array.from(row.querySelectorAll(\"td\"))\n          .map((c) => ((c as HTMLElement).innerText || \"\").trim())\n          .filter(Boolean);\n        if (cells.length === 0) {\n          cells = Array.from(row.querySelectorAll('[role=\"cell\"]'))\n            .map((c) => ((c as HTMLElement).innerText || \"\").trim())\n            .filter(Boolean);\n        }\n        if (cells.length === 0 && (row as HTMLElement).innerText) {\n          cells = ((row as HTMLElement).innerText || \"\")\n            .split(\"\\n\")\n            .map((s) => s.trim())\n            .filter(Boolean);\n        }\n      }\n\n      results.push({\n        id,\n        url: (link as HTMLAnchorElement).href,\n        cells,\n        rowText: row ? ((row as HTMLElement).innerText || \"\") : \"\",\n      });\n    }\n\n    return results;\n  });\n\n  return items.map((item) => {\n    const cells = item.cells || [];\n    let reporter = \"\";\n    let type = \"\";\n    let subject = \"\";\n    let pubDate = \"\";\n\n    if (cells.length >= 5) {\n      reporter = cells[1] || \"\";\n      type = cells[2] || \"\";\n      subject = cells[3] || \"\";\n      pubDate = cells[4] || \"\";\n    } else if (cells.length > 0) {\n      subject = cells.join(\" \");\n    }\n\n    return {\n      id: item.id,\n      url: item.url,\n      cells: item.cells,\n      rowText: item.rowText,\n      reporter,\n      type,\n      subject,\n      pubDate,\n    };\n  });\n}\n\n/**\n * Fetch detail text for an announcement\n * Returns object with text and status flags\n */\nasync function fetchDetailText(\n  browserOrContext: BrowserContext,\n  item: ScrapedResult,\n  options: {\n    proxyUrl?: string;\n    proxyUsername?: string;\n    proxyPassword?: string;\n    apiTimeout?: number;\n    detailTimeout?: number;\n    waitTextTimeout?: number;\n    postGotoWait?: number;\n  } = {}\n): Promise<{ text: string; got429: boolean }> {\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\n  const { chromium } = require('playwright-core') as typeof import('playwright-core');\n\n  const settings = {\n    apiTimeout: options.apiTimeout || 30000,      // Increased from 15s to 30s for proxy\n    detailTimeout: options.detailTimeout || 40000, // Increased from 20s to 40s for proxy\n    waitTextTimeout: options.waitTextTimeout || 30000, // Increased from 15s to 30s for proxy\n    postGotoWait: options.postGotoWait || 1500,\n  };\n\n  // Create new context with proxy if specified\n  let detailContext: BrowserContext;\n  let shouldCloseContext = false;\n\n  if (options.proxyUrl && SCRAPER_CONFIG.useProxy) {\n    try {\n      const browser = 'browser' in browserOrContext ? browserOrContext.browser() : null;\n      if (browser) {\n        detailContext = await browser.newContext({\n          proxy: {\n            server: options.proxyUrl,\n            username: options.proxyUsername,\n            password: options.proxyPassword,\n          },\n        });\n        shouldCloseContext = true;\n        console.log(`[fetchDetailText] Using proxy: ${options.proxyUrl}`);\n      } else {\n        detailContext = browserOrContext;\n      }\n    } catch (err) {\n      console.warn(`[fetchDetailText] Failed to create context with proxy:`, err);\n      detailContext = browserOrContext;\n    }\n  } else {\n    detailContext = browserOrContext;\n  }\n\n  const detailPage = await detailContext.newPage();\n  let got429 = false;\n\n  try {\n    // Track 429 errors\n    detailPage.on(\"response\", (res) => {\n      if (res.status() === 429 && res.url().includes(\"/poit/rest/\")) {\n        got429 = true;\n        console.log(`[fetchDetailText] Got 429 for ${item.id}`);\n        proxyManager.recordRateLimit();\n      }\n    });\n\n    // Set up response listener for API calls\n    let apiText = \"\";\n\n    const apiResponsePromise = detailPage.waitForResponse(\n      (res) =>\n        res.url().includes(\"/poit/rest/SokKungorelse?kungorelseid=\") &&\n        res.status() === 200,\n      { timeout: settings.apiTimeout }\n    ).catch(() => null);\n\n    const detailResponsePromise = detailPage.waitForResponse(\n      (res) =>\n        res.url().includes(\"/poit/rest/HamtaKungorelse?\") &&\n        res.status() === 200,\n      { timeout: settings.detailTimeout }\n    ).catch(() => null);\n\n    await detailPage.goto(item.url, {\n      waitUntil: \"networkidle\",\n      timeout: SCRAPER_CONFIG.navigationTimeout\n    });\n    await detailPage.waitForTimeout(settings.postGotoWait);\n    await solveBlocker(detailPage);\n\n    // Wait for content\n    await detailPage.waitForFunction(\n      () => (document.body?.innerText || \"\").includes(\"Kungörelsetext\"),\n      { timeout: settings.waitTextTimeout }\n    ).catch(() => {});\n\n    // Check if detail text is present, if not click the detail link (like Electron app)\n    const initialHasDetail = await detailPage.evaluate(() =>\n      (document.body?.innerText || \"\").includes(\"Kungörelsetext\")\n    );\n\n    if (!initialHasDetail) {\n      // Look for link to announcement detail and click it\n      const link = detailPage.locator(\n        'a.kungorelse__link, a[href*=\"/poit-app/kungorelse/\"]'\n      );\n      if ((await link.count()) > 0) {\n        await link.first().click().catch(() => {});\n        await detailPage.waitForTimeout(1500);\n\n        // Wait again for \"Kungörelsetext\"\n        await detailPage.waitForFunction(\n          () => (document.body?.innerText || \"\").includes(\"Kungörelsetext\"),\n          { timeout: settings.waitTextTimeout }\n        ).catch(() => {});\n      }\n    }\n\n    // Try to get text from API response\n    const apiResponse = await apiResponsePromise;\n    if (apiResponse) {\n      try {\n        const data = await apiResponse.json();\n        apiText = extractTextFromApiData(data);\n      } catch {}\n    }\n\n    if (!apiText) {\n      const detailResponse = await detailResponsePromise;\n      if (detailResponse) {\n        try {\n          const data = await detailResponse.json();\n          apiText = extractTextFromApiData(data);\n        } catch {}\n      }\n    }\n\n    if (apiText) {\n      return { text: apiText, got429 };\n    }\n\n    // Fallback: extract from page DOM\n    const text = await detailPage.evaluate(() => {\n      const body = document.body?.innerText || \"\";\n      if (!body) return \"\";\n      const lines = body.split(\"\\n\").map((s) => s.trim()).filter(Boolean);\n      const idx = lines.findIndex((l) => /kungörelsetext/i.test(l));\n      if (idx < 0) return \"\";\n      let end = lines.findIndex((l, i) => i > idx && /tillbaka|skriv ut/i.test(l));\n      if (end < 0) end = lines.length;\n      return lines.slice(idx + 1, end).join(\"\\n\").trim();\n    });\n\n    return { text, got429 };\n  } finally {\n    await detailPage.close();\n    if (shouldCloseContext && detailContext !== browserOrContext) {\n      await detailContext.close().catch(() => {});\n    }\n  }\n}\n\n/**\n * Extract text from API response data\n */\nfunction extractTextFromApiData(data: unknown): string {\n  if (!data) return \"\";\n  const candidates: string[] = [];\n\n  function walk(val: unknown, path: string) {\n    if (!val) return;\n    if (typeof val === \"string\") {\n      const keyHint = /text|kungorelse/i.test(path);\n      const contentHint = /org\\s*nr|företagsnamn|kungörelsetext/i.test(val);\n      if ((keyHint || contentHint) && val.length > 20) {\n        candidates.push(val);\n      }\n      return;\n    }\n    if (Array.isArray(val)) {\n      for (const item of val) walk(item, path);\n      return;\n    }\n    if (typeof val === \"object\" && val !== null) {\n      for (const [key, item] of Object.entries(val)) {\n        walk(item, `${path}.${key}`);\n      }\n    }\n  }\n\n  walk(data, \"root\");\n  if (candidates.length === 0) return \"\";\n  candidates.sort((a, b) => b.length - a.length);\n  return candidates[0].trim();\n}\n\ninterface FindResultsResponse {\n  results: ScrapedResult[];\n  error?: 'unknown_error' | 'timeout';\n}\n\n/**\n * Find results on page (with retries)\n */\nasync function findResults(page: Page): Promise<FindResultsResponse> {\n  // First, wait for either results or \"no results\" message to appear\n  console.log('[findResults] Waiting for results to load...');\n\n  // Debug: Log current page state\n  const debugState = await page.evaluate(() => {\n    const body = document.body?.innerText || '';\n    const linkCount = document.querySelectorAll('a[href*=\"kungorelse/\"]').length;\n    const hasCount = /antal\\s*träffar/i.test(body);\n    const noResults = /inga\\s*träffar/i.test(body);\n    const hasTable = document.querySelector('table') !== null;\n    const hasLoader = body.includes('Laddar') || body.includes('Söker');\n    // Get first 500 chars of body for debugging\n    const bodyPreview = body.substring(0, 500).replace(/\\s+/g, ' ');\n    return { linkCount, hasCount, noResults, hasTable, hasLoader, bodyPreview };\n  });\n  console.log('[findResults] Initial page state:', JSON.stringify(debugState));\n\n  try {\n    // Wait for either: results table, \"Antal träffar\", \"inga träffar\", or error message\n    await page.waitForFunction(\n      () => {\n        const bodyText = document.body?.innerText || '';\n        const hasResults = document.querySelectorAll('a[href*=\"kungorelse/\"]').length > 0;\n        const hasCount = /antal\\s*träffar/i.test(bodyText);\n        const noResults = /inga\\s*träffar/i.test(bodyText);\n        const hasError = /okänt\\s*fel|försök\\s*igen\\s*senare/i.test(bodyText);\n        return hasResults || hasCount || noResults || hasError;\n      },\n      { timeout: 30000 }\n    );\n\n    // Check if we got an error\n    const hasError = await page.evaluate(() => {\n      const bodyText = document.body?.innerText || '';\n      return /okänt\\s*fel|försök\\s*igen\\s*senare/i.test(bodyText);\n    });\n\n    if (hasError) {\n      console.warn('[findResults] Bolagsverket returned error: \"Okänt fel. Försök igen senare.\"');\n      console.log('[findResults] This may be due to proxy/session issue - signaling error for retry');\n      return { results: [], error: 'unknown_error' };\n    }\n\n    console.log('[findResults] Page loaded, checking results...');\n  } catch (e) {\n    console.warn('[findResults] Timeout waiting for results indicator');\n    // Debug: Log page state after timeout\n    const timeoutState = await page.evaluate(() => {\n      const body = document.body?.innerText || '';\n      const linkCount = document.querySelectorAll('a[href*=\"kungorelse/\"]').length;\n      const bodyPreview = body.substring(0, 800).replace(/\\s+/g, ' ');\n      const allLinks = Array.from(document.querySelectorAll('a')).map(a => a.href).slice(0, 10);\n      return { linkCount, bodyPreview, allLinks };\n    });\n    console.log('[findResults] Timeout state:', JSON.stringify(timeoutState));\n  }\n\n  for (let i = 0; i < 10; i++) {\n    await page.waitForTimeout(1500);\n    await solveBlocker(page);\n\n    const results = await collectResults(page);\n    if (results.length > 0) {\n      console.log(`[findResults] Found ${results.length} results on attempt ${i + 1}`);\n      return { results };\n    }\n\n    const bodyText = (await page.textContent(\"body\")) || \"\";\n\n    // Check for \"Antal träffar: 0\" or \"inga träffar\"\n    if (bodyText.toLowerCase().includes(\"inga träffar\")) {\n      console.log('[findResults] Page shows \"inga träffar\"');\n      return { results: [] };\n    }\n\n    // Check for \"Antal träffar: X\" where X > 0 - results should exist\n    const countMatch = bodyText.match(/antal\\s*träffar:\\s*(\\d+)/i);\n    if (countMatch) {\n      const count = parseInt(countMatch[1], 10);\n      console.log(`[findResults] Page shows \"Antal träffar: ${count}\", attempt ${i + 1}`);\n      if (count === 0) {\n        return { results: [] };\n      }\n      // Results exist but not found yet - keep trying\n      if (i < 9) {\n        console.log('[findResults] Results expected but not found, waiting more...');\n        await page.waitForTimeout(2000); // Extra wait\n      }\n    }\n  }\n\n  console.log('[findResults] No results found after all attempts');\n  return { results: [], error: 'timeout' };\n}\n\n/**\n * Run tasks with concurrency control (like Electron app)\n */\nasync function runWithConcurrency<T>(\n  items: T[],\n  concurrency: number,\n  fn: (item: T, index: number) => Promise<void>\n): Promise<void> {\n  const queue = items.map((item, index) => ({ item, index }));\n  const workers: Promise<void>[] = [];\n\n  for (let i = 0; i < concurrency; i++) {\n    const worker = (async () => {\n      while (queue.length > 0) {\n        const task = queue.shift();\n        if (!task) break;\n        try {\n          await fn(task.item, task.index);\n        } catch (err) {\n          console.error(`[Worker ${i}] Task ${task.index} failed:`, err);\n        }\n      }\n    })();\n    workers.push(worker);\n  }\n\n  await Promise.all(workers);\n}\n\n/**\n * Enrich results with detail text using concurrent fetching and retry logic\n * Matches Electron app's enrichWithDetails function\n */\nasync function enrichWithDetails(\n  context: BrowserContext,\n  results: ScrapedResult[]\n): Promise<void> {\n  let lastFetchTime = 0;\n\n  await runWithConcurrency(results, SCRAPER_CONFIG.detailConcurrency, async (item) => {\n    try {\n      // Enforce delay between fetches to avoid 429\n      const now = Date.now();\n      const elapsed = now - lastFetchTime;\n      if (elapsed < SCRAPER_CONFIG.detailDelayMs && lastFetchTime > 0) {\n        const waitTime = SCRAPER_CONFIG.detailDelayMs - elapsed;\n        console.log(`[enrichWithDetails] Waiting ${waitTime}ms before next fetch...`);\n        await new Promise((r) => setTimeout(r, waitTime));\n      }\n      lastFetchTime = Date.now();\n\n      let text = \"\";\n      let retryDelay = 5000;\n\n      // Retry loop with proxy rotation\n      for (let attempt = 1; attempt <= SCRAPER_CONFIG.maxDetailRetries; attempt++) {\n        // Get next proxy if available\n        const currentProxy = proxyManager.getCurrentProxy();\n        const proxyUrl = currentProxy?.server;\n        if (proxyUrl && attempt > 1) {\n          console.log(`[enrichWithDetails] Switching to proxy: ${proxyUrl}`);\n        }\n\n        const result = await fetchDetailText(context, item, {\n          proxyUrl,\n          proxyUsername: currentProxy?.username,\n          proxyPassword: currentProxy?.password,\n        });\n        text = result.text || \"\";\n\n        if (result.got429) {\n          console.warn(`[enrichWithDetails] Got 429 for ${item.id}, attempt ${attempt}/${SCRAPER_CONFIG.maxDetailRetries}`);\n\n          // Check if proxy should be activated\n          const { shouldActivate, reason } = proxyManager.shouldActivate();\n          if (shouldActivate && reason) {\n            console.log(`[enrichWithDetails] Activating proxy: ${reason}`);\n            await proxyManager.activate(reason);\n          }\n\n          // Rotate to next proxy if active\n          if (proxyManager.getStatus().isActive) {\n            proxyManager.rotateProxy();\n            console.log(`[enrichWithDetails] Rotated proxy, retrying...`);\n          } else {\n            console.warn(`[enrichWithDetails] Waiting ${retryDelay}ms...`);\n            await new Promise((r) => setTimeout(r, retryDelay));\n            retryDelay *= 2; // Exponential backoff\n          }\n          lastFetchTime = Date.now();\n          continue;\n        }\n\n        if (text && text.trim()) {\n          proxyManager.recordSuccess();\n          break;\n        }\n\n        if (attempt < SCRAPER_CONFIG.maxDetailRetries) {\n          console.log(`[enrichWithDetails] Empty text for ${item.id}, retrying (attempt ${attempt}/${SCRAPER_CONFIG.maxDetailRetries})`);\n          await new Promise((r) => setTimeout(r, 4000));\n        }\n      }\n\n      // Final retry with extended timeouts if still empty\n      if (!text || !text.trim()) {\n        console.log(`[enrichWithDetails] Final retry with extended timeouts for ${item.id}`);\n        await new Promise((r) => setTimeout(r, SCRAPER_CONFIG.detailDelayMs + 2000));\n\n        const currentProxy = proxyManager.getCurrentProxy();\n        const result = await fetchDetailText(context, item, {\n          proxyUrl: currentProxy?.server,\n          proxyUsername: currentProxy?.username,\n          proxyPassword: currentProxy?.password,\n          apiTimeout: 35000,      // Increased for proxy\n          detailTimeout: 50000,   // Increased for proxy\n          waitTextTimeout: 35000, // Increased for proxy\n          postGotoWait: 3000,\n        });\n        text = result.text || \"\";\n        lastFetchTime = Date.now();\n      }\n\n      // Store results\n      if (text) {\n        const longText = isLongText(text);\n        item.detailText = longText ? truncateWords(text, DETAIL_TEXT_WORD_LIMIT) : text;\n        item.fullText = text;\n      } else {\n        console.warn(`[enrichWithDetails] Empty text for ${item.id} after all retries`);\n      }\n    } catch (err) {\n      console.warn(`[enrichWithDetails] Failed ${item.id}:`, err);\n    }\n  });\n}\n\n/**\n * Main search function - search for announcements\n */\nexport async function searchAnnouncements(\n  query: string,\n  options: SearchOptions = {}\n): Promise<Announcement[]> {\n  // Dynamic import of playwright-core for serverless environments\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\n  const { chromium } = require('playwright-core') as typeof import('playwright-core');\n\n  // Ensure proxies are fresh (auto-refresh handles cooldown)\n  await forceRefreshProxies();\n\n  // ALWAYS activate proxy for Bolagsverket - it aggressively blocks scrapers\n  // Even after solving CAPTCHA, requests from proxy IPs get \"Okänt fel\" without proper session\n  const PROXY_SERVER = process.env.PROXY_SERVER || '';\n  const shouldUseProxy = SCRAPER_CONFIG.useProxy ||\n    (PROXY_SERVER && PROXY_SERVER !== 'disabled') ||\n    Boolean(process.env.TWOCAPTCHA_API_KEY);\n\n  if (shouldUseProxy) {\n    const status = proxyManager.getStatus();\n    if (!status.isActive) {\n      console.log('[Scraper] Activating proxy for Bolagsverket (always required)');\n      await proxyManager.activate('Bolagsverket requires proxy');\n    }\n  } else {\n    // Fallback: Check if proxy should be activated based on blocking stats\n    const { shouldActivate, reason } = proxyManager.shouldActivate();\n    if (shouldActivate && reason) {\n      console.log(`[Scraper] Activating proxy: ${reason}`);\n      await proxyManager.activate(reason);\n    }\n  }\n\n  // Get proxy configuration if active\n  const proxyConfig = proxyManager.getPlaywrightConfig();\n  if (proxyConfig.proxy) {\n    console.log(`[Scraper] Using proxy: ${proxyConfig.proxy.server}`);\n  } else {\n    console.log('[Scraper] WARNING: No proxy configured - Bolagsverket may block requests');\n  }\n\n  // Find Chromium executable for playwright-core\n  const executablePath = findChromiumPath();\n  if (executablePath) {\n    console.log('[Scraper] Using Chromium:', executablePath);\n  } else {\n    console.log('[Scraper] No custom Chromium path, using default');\n  }\n\n  const browser = await chromium.launch({\n    headless: true,\n    executablePath,\n    args: ['--no-sandbox', '--disable-setuid-sandbox', '--disable-dev-shm-usage'],\n    ...proxyConfig,\n  });\n\n  const context = await browser.newContext();\n\n  // Restore session cookies if available\n  const hasSession = await sessionManager.restoreCookies(context);\n  if (hasSession) {\n    console.log('[Scraper] Restored session cookies');\n  }\n  const page = await context.newPage();\n\n  // Intercept Angular bundle and patch bugs (only when not using proxy)\n  // Proxy causes \"socket hang up\" errors with route.fetch(), so skip patching\n  // The patches fix: fixLink calls replaceAll on undefined, URL stringify errors\n  const skipBundlePatching = Boolean(proxyConfig.proxy);\n  if (skipBundlePatching) {\n    console.log('[Scraper] Skipping Angular bundle patching (proxy active - causes socket hang up)');\n  }\n\n  await page.route('**/assets/index-*.js', async (route) => {\n    // Skip patching when using proxy to avoid socket hang up errors\n    if (skipBundlePatching) {\n      await route.continue();\n      return;\n    }\n    console.log('[Scraper] Intercepting Angular bundle:', route.request().url());\n    try {\n      const response = await route.fetch();\n      let body = await response.text();\n      const originalLength = body.length;\n      let patchCount = 0;\n\n      // Patch 1: fixLink to safely handle undefined values\n      // ACTUAL code: fixLink:function(e){return e.replaceAll(\"/\",\"-\")}\n      const beforeFixLink = body.length;\n      body = body.replace(\n        /fixLink:function\\((\\w)\\)\\{return \\1\\.replaceAll/g,\n        'fixLink:function($1){if($1==null)return\"\";return $1.replaceAll'\n      );\n      if (body.length !== beforeFixLink) patchCount++;\n\n      // Patch 2: URL parameter stringify - prevent \"Missing required param\" errors\n      // Pattern: throw new Error('Missing required param \"'+e+'\"')\n      const beforeThrow = body.length;\n      body = body.replace(\n        /throw new Error\\('Missing required param \"'\\+(\\w)\\+'\"\\)/g,\n        'console.warn(\"[Patched] Missing param:\",\\$1);return\"\"'\n      );\n      if (body.length !== beforeThrow) patchCount++;\n\n      // Patch 3: Alternative pattern - some builds use template literals\n      const beforeTemplate = body.length;\n      body = body.replace(\n        /throw new Error\\(`Missing required param \"\\$\\{(\\w)\\}\"`\\)/g,\n        'console.warn(\"[Patched] Missing param:\",\\$1);return\"\"'\n      );\n      if (body.length !== beforeTemplate) patchCount++;\n\n      // Patch 4: Handle the URL resolver that passes undefined to stringify\n      const beforeResolver = body.length;\n      body = body.replace(\n        /kungorelseid:(\\w)\\.id/g,\n        'kungorelseid:$1&&$1.id||\"0\"'\n      );\n      if (body.length !== beforeResolver) patchCount++;\n\n      console.log(`[Scraper] Angular bundle patches: ${patchCount} applied (${originalLength} -> ${body.length})`);\n\n      await route.fulfill({\n        response,\n        body,\n        headers: {\n          ...response.headers(),\n          'Content-Length': String(body.length),\n        },\n      });\n    } catch (err) {\n      console.warn('[Scraper] Failed to patch Angular bundle:', err);\n      // Try to continue without patching, but handle potential network errors\n      try {\n        await route.continue();\n      } catch (continueErr) {\n        console.warn('[Scraper] route.continue() also failed, aborting route:', continueErr);\n        try {\n          await route.abort('failed');\n        } catch {\n          // Ignore abort errors\n        }\n      }\n    }\n  });\n\n  try {\n    console.log(`START: query='${query}'`);\n\n    await page.goto(START_URL, {\n      waitUntil: \"networkidle\",\n      timeout: SCRAPER_CONFIG.navigationTimeout\n    });\n    await page.waitForTimeout(1000);\n    await solveBlocker(page);\n\n    let ready = await maybeNavigateToSearch(page);\n    await solveBlocker(page);\n\n    if (!ready) {\n      await page.goto(START_URL, {\n        waitUntil: \"networkidle\",\n        timeout: SCRAPER_CONFIG.navigationTimeout\n      });\n      await page.waitForTimeout(1000);\n      await solveBlocker(page);\n      ready = await maybeNavigateToSearch(page);\n    }\n\n    await waitForSearchInputs(page);\n\n    const queryVariants = buildQueryVariants(query);\n    let results: ScrapedResult[] = [];\n    let usedQuery = query;\n\n    for (let variantIndex = 0; variantIndex < queryVariants.length; variantIndex++) {\n      const currentQuery = queryVariants[variantIndex];\n      usedQuery = currentQuery;\n      let submitted = false;\n      let invalidQuery = false;\n\n      for (let attempt = 1; attempt <= 3; attempt++) {\n        const submitResult = await submitSearch(page, currentQuery);\n        if (submitResult === true) {\n          submitted = true;\n          break;\n        }\n        if (submitResult === \"disabled\") {\n          invalidQuery = true;\n          break;\n        }\n        console.warn(`SEARCH: retrying input lookup (${attempt})`);\n\n        // Use goto instead of reload with increased timeout\n        try {\n          await page.goto(START_URL, {\n            waitUntil: \"domcontentloaded\",\n            timeout: SCRAPER_CONFIG.navigationTimeout\n          });\n        } catch (err) {\n          console.warn(`SEARCH: navigation failed on retry ${attempt}:`, err);\n          // Try one more time with networkidle\n          await page.goto(START_URL, {\n            waitUntil: \"networkidle\",\n            timeout: SCRAPER_CONFIG.navigationTimeout\n          }).catch(() => {});\n        }\n\n        await page.waitForTimeout(1000);\n        await solveBlocker(page);\n        await maybeNavigateToSearch(page);\n      }\n\n      if (!submitted) {\n        if (invalidQuery) {\n          console.log(`SEARCH: query '${currentQuery}' invalid, trying next variant...`);\n          continue;\n        }\n        throw new Error(\"Search input not found after retries.\");\n      }\n\n      await page.waitForTimeout(1000);\n      const findResponse = await findResults(page);\n      results = findResponse.results;\n      console.log(`RESULTS: found ${results.length} for query='${currentQuery}'`);\n\n      // Handle \"Okänt fel\" - try to restart session with proxy rotation\n      if (findResponse.error === 'unknown_error') {\n        console.log('RESULTS: Got \"Okänt fel\" - rotating proxy and restarting session...');\n\n        // Mark current proxy as failed and rotate\n        if (proxyManager.getStatus().isActive) {\n          const currentProxy = proxyManager.getCurrentProxy();\n          proxyManager.markFailed(currentProxy);\n          proxyManager.rotateProxy();\n          console.log('RESULTS: Marked proxy as failed and rotated');\n\n          // Check if we have any working proxies left\n          const status = proxyManager.getStatus();\n          if (status.available === 0) {\n            console.log('RESULTS: All proxies exhausted, refreshing from API...');\n            await forceRefreshProxies();\n          }\n        }\n\n        // Navigate back to start and try again with fresh session\n        // Use domcontentloaded instead of networkidle to avoid hanging\n        await page.goto(START_URL, {\n          waitUntil: \"domcontentloaded\",\n          timeout: SCRAPER_CONFIG.navigationTimeout\n        }).catch((err) => {\n          console.warn('RESULTS: Navigation after rotation failed:', err);\n        });\n\n        // Check for proxy crash (chrome-error)\n        const currentUrl = page.url();\n        if (currentUrl.includes('chrome-error://') || currentUrl.includes('chromewebdata')) {\n          console.error('RESULTS: Proxy connection crashed (chrome-error) - cannot retry in same browser');\n          // The browser is stuck with failed proxy, can't recover without restart\n          // Return empty results and let next search use fresh browser\n          break;\n        }\n\n        await page.waitForTimeout(2000);\n        await solveBlocker(page);\n        await maybeNavigateToSearch(page);\n        await waitForSearchInputs(page);\n\n        // Retry the search\n        const retrySubmit = await submitSearch(page, currentQuery);\n        if (retrySubmit === true) {\n          await page.waitForTimeout(1000);\n          const retryResponse = await findResults(page);\n          results = retryResponse.results;\n          console.log(`RESULTS: retry found ${results.length} for query='${currentQuery}'`);\n        }\n      }\n\n      if (results.length > 0) break;\n\n      if (variantIndex < queryVariants.length - 1) {\n        console.log(`SEARCH: no results for '${currentQuery}', trying next variant...`);\n        await solveBlocker(page);\n        await maybeNavigateToSearch(page);\n        await waitForSearchInputs(page);\n      }\n    }\n\n    // Enrich with details if not skipped\n    if (!options.skipDetails) {\n      const limit = options.detailLimit || results.length;\n      const itemsToEnrich = results.slice(0, limit);\n\n      console.log(`[searchAnnouncements] Enriching ${itemsToEnrich.length} results with details...`);\n      await enrichWithDetails(context, itemsToEnrich);\n      console.log(`[searchAnnouncements] Detail enrichment complete`);\n    }\n\n    // Convert to Announcement format\n    const announcements: Announcement[] = results.map((r) => ({\n      id: r.id,\n      query: usedQuery,\n      reporter: r.reporter,\n      type: r.type,\n      subject: r.subject || '',\n      pubDate: r.pubDate,\n      publishedAt: r.pubDate ? parseSwedishDate(r.pubDate) : undefined,\n      detailText: r.detailText,\n      fullText: r.fullText,\n      url: r.url,\n      scrapedAt: new Date(),\n    }));\n\n    console.log(`COMPLETE: ${announcements.length} announcements found`);\n    return announcements;\n\n  } finally {\n    // Save session cookies for next run\n    try {\n      await sessionManager.saveCookies(context);\n    } catch (e) {\n      console.warn('[Scraper] Failed to save cookies:', e);\n    }\n\n    await context.close();\n    await browser.close();\n  }\n}\n\n/**\n * Parse Swedish date format (e.g., \"2024-01-15\" or \"15 jan 2024\")\n */\nfunction parseSwedishDate(dateStr: string): Date | undefined {\n  if (!dateStr) return undefined;\n\n  // Try ISO format first\n  const isoMatch = dateStr.match(/(\\d{4})-(\\d{2})-(\\d{2})/);\n  if (isoMatch) {\n    return new Date(dateStr);\n  }\n\n  // Try Swedish format \"15 jan 2024\"\n  const months: Record<string, number> = {\n    jan: 0, feb: 1, mar: 2, apr: 3, maj: 4, jun: 5,\n    jul: 6, aug: 7, sep: 8, okt: 9, nov: 10, dec: 11,\n  };\n\n  const swedishMatch = dateStr.toLowerCase().match(/(\\d{1,2})\\s+(\\w{3})\\s+(\\d{4})/);\n  if (swedishMatch) {\n    const day = parseInt(swedishMatch[1], 10);\n    const month = months[swedishMatch[2]];\n    const year = parseInt(swedishMatch[3], 10);\n    if (month !== undefined) {\n      return new Date(year, month, day);\n    }\n  }\n\n  return undefined;\n}\n\nexport default {\n  searchAnnouncements,\n  buildQueryVariants,\n  formatTextAsMarkdown,\n};\n","/**\n * Session Manager - Cookie persistence to reduce CAPTCHAs\n *\n * Stores and restores browser session cookies between scrape runs\n * In serverless environments, uses in-memory cache with fallback\n */\n\nimport type { BrowserContext } from 'playwright-core';\n\nexport interface SessionCookie {\n  name: string;\n  value: string;\n  domain: string;\n  path: string;\n  expires: number;\n  httpOnly: boolean;\n  secure: boolean;\n  sameSite: 'Strict' | 'Lax' | 'None';\n}\n\nexport interface SessionData {\n  cookies: SessionCookie[];\n  savedAt: number;\n  userAgent?: string;\n}\n\n// In-memory session cache (for serverless environments)\n// In production, this could be Redis or database-backed\nconst sessionCache = new Map<string, SessionData>();\n\n// Session expiry time (4 hours)\nconst SESSION_EXPIRY_MS = 4 * 60 * 60 * 1000;\n\nclass SessionManager {\n  private sessionKey = 'poit_session';\n\n  /**\n   * Save cookies from browser context\n   */\n  async saveCookies(context: BrowserContext): Promise<void> {\n    try {\n      const cookies = await context.cookies();\n\n      // Filter to only POIT-related cookies\n      const poitCookies = cookies\n        .filter(c =>\n          c.domain.includes('bolagsverket.se') ||\n          c.domain.includes('poit')\n        )\n        .map(c => ({\n          name: c.name,\n          value: c.value,\n          domain: c.domain,\n          path: c.path,\n          expires: c.expires,\n          httpOnly: c.httpOnly,\n          secure: c.secure,\n          sameSite: c.sameSite as 'Strict' | 'Lax' | 'None',\n        }));\n\n      if (poitCookies.length === 0) {\n        console.log('[SessionManager] No POIT cookies to save');\n        return;\n      }\n\n      const sessionData: SessionData = {\n        cookies: poitCookies,\n        savedAt: Date.now(),\n      };\n\n      sessionCache.set(this.sessionKey, sessionData);\n      console.log(`[SessionManager] Saved ${poitCookies.length} cookies`);\n    } catch (error) {\n      console.error('[SessionManager] Error saving cookies:', error);\n    }\n  }\n\n  /**\n   * Restore cookies to browser context\n   */\n  async restoreCookies(context: BrowserContext): Promise<boolean> {\n    try {\n      const sessionData = sessionCache.get(this.sessionKey);\n\n      if (!sessionData) {\n        console.log('[SessionManager] No saved session found');\n        return false;\n      }\n\n      // Check if session is expired\n      if (Date.now() - sessionData.savedAt > SESSION_EXPIRY_MS) {\n        console.log('[SessionManager] Session expired, clearing');\n        sessionCache.delete(this.sessionKey);\n        return false;\n      }\n\n      // Filter out expired cookies\n      const now = Date.now() / 1000;\n      const validCookies = sessionData.cookies.filter(c =>\n        c.expires === -1 || c.expires > now\n      );\n\n      if (validCookies.length === 0) {\n        console.log('[SessionManager] All cookies expired');\n        return false;\n      }\n\n      await context.addCookies(validCookies);\n      console.log(`[SessionManager] Restored ${validCookies.length} cookies`);\n      return true;\n    } catch (error) {\n      console.error('[SessionManager] Error restoring cookies:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Clear saved session\n   */\n  clearSession(): void {\n    sessionCache.delete(this.sessionKey);\n    console.log('[SessionManager] Session cleared');\n  }\n\n  /**\n   * Check if we have a valid session\n   */\n  hasValidSession(): boolean {\n    const sessionData = sessionCache.get(this.sessionKey);\n    if (!sessionData) return false;\n\n    // Check expiry\n    if (Date.now() - sessionData.savedAt > SESSION_EXPIRY_MS) {\n      return false;\n    }\n\n    return sessionData.cookies.length > 0;\n  }\n\n  /**\n   * Get session age in minutes\n   */\n  getSessionAge(): number | null {\n    const sessionData = sessionCache.get(this.sessionKey);\n    if (!sessionData) return null;\n    return Math.floor((Date.now() - sessionData.savedAt) / 60000);\n  }\n\n  /**\n   * Get session status\n   */\n  getStatus(): {\n    hasSession: boolean;\n    cookieCount: number;\n    ageMinutes: number | null;\n    expiresIn: number | null;\n  } {\n    const sessionData = sessionCache.get(this.sessionKey);\n\n    if (!sessionData) {\n      return {\n        hasSession: false,\n        cookieCount: 0,\n        ageMinutes: null,\n        expiresIn: null,\n      };\n    }\n\n    const ageMs = Date.now() - sessionData.savedAt;\n    const expiresInMs = SESSION_EXPIRY_MS - ageMs;\n\n    return {\n      hasSession: true,\n      cookieCount: sessionData.cookies.length,\n      ageMinutes: Math.floor(ageMs / 60000),\n      expiresIn: expiresInMs > 0 ? Math.floor(expiresInMs / 60000) : 0,\n    };\n  }\n}\n\n// Singleton instance\nexport const sessionManager = new SessionManager();\n\nexport default sessionManager;\n","/**\n * Kungörelser (Company Announcements) Module\n *\n * Provides functionality for searching and managing company announcements\n * from Bolagsverket POIT.\n */\n\nexport * from './types';\nexport * from './scraper';\nexport { proxyManager } from './proxy-manager';\nexport { sessionManager } from './session-manager';\n\nimport { searchAnnouncements, formatTextAsMarkdown } from './scraper';\nimport type { Announcement, AnnouncementFilter, SearchOptions } from './types';\n\n/**\n * Search for announcements and optionally save to database\n */\nexport async function searchAndSaveAnnouncements(\n  query: string,\n  options: SearchOptions = {}\n): Promise<Announcement[]> {\n  const { prisma } = await import('@/lib/db');\n\n  const announcements = await searchAnnouncements(query, options);\n\n  // Save to database\n  for (const announcement of announcements) {\n    try {\n      await prisma.announcement.upsert({\n        where: { id: announcement.id },\n        create: {\n          id: announcement.id,\n          query: announcement.query,\n          reporter: announcement.reporter,\n          type: announcement.type,\n          subject: announcement.subject,\n          pubDate: announcement.pubDate,\n          publishedAt: announcement.publishedAt,\n          detailText: announcement.detailText,\n          fullText: announcement.fullText,\n          url: announcement.url,\n          orgNumber: extractOrgNumber(announcement.subject, announcement.query),\n          scrapedAt: announcement.scrapedAt || new Date(),\n        },\n        update: {\n          detailText: announcement.detailText,\n          fullText: announcement.fullText,\n          updatedAt: new Date(),\n        },\n      });\n    } catch (err) {\n      console.error(`Failed to save announcement ${announcement.id}:`, err);\n    }\n  }\n\n  // Update stats\n  try {\n    await prisma.announcementScrapeStats.upsert({\n      where: { id: 'stats' },\n      create: {\n        id: 'stats',\n        totalSearches: 1,\n        totalAnnouncements: announcements.length,\n        lastSearchAt: new Date(),\n      },\n      update: {\n        totalSearches: { increment: 1 },\n        totalAnnouncements: { increment: announcements.length },\n        lastSearchAt: new Date(),\n      },\n    });\n  } catch (err) {\n    console.error('Failed to update stats:', err);\n  }\n\n  return announcements;\n}\n\n/**\n * Get announcements from database (offset-based pagination)\n * @deprecated Use getAnnouncementsCursor for better performance with large datasets\n */\nexport async function getAnnouncements(filter: AnnouncementFilter = {}): Promise<{\n  announcements: Announcement[];\n  total: number;\n}> {\n  const { prisma } = await import('@/lib/db');\n\n  const where: Record<string, unknown> = {};\n\n  if (filter.query) {\n    where.OR = [\n      { subject: { contains: filter.query, mode: 'insensitive' } },\n      { query: { contains: filter.query, mode: 'insensitive' } },\n      { detailText: { contains: filter.query, mode: 'insensitive' } },\n    ];\n  }\n\n  if (filter.orgNumber) {\n    where.orgNumber = filter.orgNumber;\n  }\n\n  if (filter.type) {\n    where.type = filter.type;\n  }\n\n  if (filter.fromDate || filter.toDate) {\n    where.publishedAt = {};\n    if (filter.fromDate) {\n      (where.publishedAt as Record<string, Date>).gte = filter.fromDate;\n    }\n    if (filter.toDate) {\n      (where.publishedAt as Record<string, Date>).lte = filter.toDate;\n    }\n  }\n\n  const [announcements, total] = await Promise.all([\n    prisma.announcement.findMany({\n      where,\n      orderBy: { publishedAt: 'desc' },\n      skip: filter.offset || 0,\n      take: filter.limit || 50,\n    }),\n    prisma.announcement.count({ where }),\n  ]);\n\n  return {\n    announcements: announcements.map((a) => ({\n      id: a.id,\n      query: a.query,\n      reporter: a.reporter || undefined,\n      type: a.type || undefined,\n      subject: a.subject,\n      pubDate: a.pubDate || undefined,\n      publishedAt: a.publishedAt || undefined,\n      detailText: a.detailText || undefined,\n      fullText: a.fullText || undefined,\n      url: a.url || undefined,\n      orgNumber: a.orgNumber || undefined,\n      scrapedAt: a.scrapedAt,\n    })),\n    total,\n  };\n}\n\n/**\n * Get announcements from database (cursor-based pagination)\n * More efficient for large datasets - constant time regardless of page depth\n */\nexport async function getAnnouncementsCursor(filter: AnnouncementFilter & { cursor?: string } = {}): Promise<{\n  announcements: Announcement[];\n  total: number;\n  nextCursor: string | null;\n  hasMore: boolean;\n}> {\n  const { prisma } = await import('@/lib/db');\n\n  const where: Record<string, unknown> = {};\n\n  if (filter.query) {\n    where.OR = [\n      { subject: { contains: filter.query, mode: 'insensitive' } },\n      { query: { contains: filter.query, mode: 'insensitive' } },\n      { detailText: { contains: filter.query, mode: 'insensitive' } },\n    ];\n  }\n\n  if (filter.orgNumber) {\n    where.orgNumber = filter.orgNumber;\n  }\n\n  if (filter.type) {\n    where.type = filter.type;\n  }\n\n  if (filter.fromDate || filter.toDate) {\n    where.publishedAt = {};\n    if (filter.fromDate) {\n      (where.publishedAt as Record<string, Date>).gte = filter.fromDate;\n    }\n    if (filter.toDate) {\n      (where.publishedAt as Record<string, Date>).lte = filter.toDate;\n    }\n  }\n\n  const limit = filter.limit || 50;\n\n  // Fetch limit + 1 to check if there are more results\n  const announcements = await prisma.announcement.findMany({\n    where,\n    orderBy: [\n      { publishedAt: 'desc' },\n      { id: 'desc' }, // Secondary sort for stable pagination\n    ],\n    cursor: filter.cursor ? { id: filter.cursor } : undefined,\n    skip: filter.cursor ? 1 : 0, // Skip the cursor itself\n    take: limit + 1,\n  });\n\n  const hasMore = announcements.length > limit;\n  const results = hasMore ? announcements.slice(0, limit) : announcements;\n  const nextCursor = hasMore ? results[results.length - 1].id : null;\n\n  // Get total count (only if needed for UI)\n  const total = await prisma.announcement.count({ where });\n\n  return {\n    announcements: results.map((a) => ({\n      id: a.id,\n      query: a.query,\n      reporter: a.reporter || undefined,\n      type: a.type || undefined,\n      subject: a.subject,\n      pubDate: a.pubDate || undefined,\n      publishedAt: a.publishedAt || undefined,\n      detailText: a.detailText || undefined,\n      fullText: a.fullText || undefined,\n      url: a.url || undefined,\n      orgNumber: a.orgNumber || undefined,\n      scrapedAt: a.scrapedAt,\n    })),\n    total,\n    nextCursor,\n    hasMore,\n  };\n}\n\n/**\n * Get announcement by ID\n */\nexport async function getAnnouncementById(id: string): Promise<Announcement | null> {\n  const { prisma } = await import('@/lib/db');\n\n  const announcement = await prisma.announcement.findUnique({\n    where: { id },\n  });\n\n  if (!announcement) return null;\n\n  return {\n    id: announcement.id,\n    query: announcement.query,\n    reporter: announcement.reporter || undefined,\n    type: announcement.type || undefined,\n    subject: announcement.subject,\n    pubDate: announcement.pubDate || undefined,\n    publishedAt: announcement.publishedAt || undefined,\n    detailText: announcement.detailText || undefined,\n    fullText: announcement.fullText || undefined,\n    url: announcement.url || undefined,\n    orgNumber: announcement.orgNumber || undefined,\n    scrapedAt: announcement.scrapedAt,\n  };\n}\n\n/**\n * Get announcements for a specific company\n */\nexport async function getCompanyAnnouncements(\n  orgNumber: string\n): Promise<Announcement[]> {\n  const { prisma } = await import('@/lib/db');\n\n  const announcements = await prisma.announcement.findMany({\n    where: { orgNumber },\n    orderBy: { publishedAt: 'desc' },\n  });\n\n  return announcements.map((a) => ({\n    id: a.id,\n    query: a.query,\n    reporter: a.reporter || undefined,\n    type: a.type || undefined,\n    subject: a.subject,\n    pubDate: a.pubDate || undefined,\n    publishedAt: a.publishedAt || undefined,\n    detailText: a.detailText || undefined,\n    fullText: a.fullText || undefined,\n    url: a.url || undefined,\n    orgNumber: a.orgNumber || undefined,\n    scrapedAt: a.scrapedAt,\n  }));\n}\n\n/**\n * Get scrape statistics\n */\nexport async function getScrapeStats() {\n  const { prisma } = await import('@/lib/db');\n\n  const stats = await prisma.announcementScrapeStats.findUnique({\n    where: { id: 'stats' },\n  });\n\n  if (!stats) {\n    return {\n      totalSearches: 0,\n      totalAnnouncements: 0,\n      lastSearchAt: null,\n      captchaSolves: 0,\n      errors: 0,\n      isRunning: false,\n      concurrentSearches: 5,\n      delayMs: 3000,\n    };\n  }\n\n  return {\n    totalSearches: stats.totalSearches,\n    totalAnnouncements: stats.totalAnnouncements,\n    lastSearchAt: stats.lastSearchAt,\n    captchaSolves: stats.captchaSolves,\n    errors: stats.errors,\n    isRunning: stats.isRunning,\n    concurrentSearches: stats.concurrentSearches,\n    delayMs: stats.delayMs,\n  };\n}\n\n/**\n * Get unique announcement types\n */\nexport async function getAnnouncementTypes(): Promise<string[]> {\n  const { prisma } = await import('@/lib/db');\n\n  const types = await prisma.announcement.findMany({\n    select: { type: true },\n    distinct: ['type'],\n    where: { type: { not: null } },\n  });\n\n  return types.map((t) => t.type).filter((t): t is string => t !== null);\n}\n\n/**\n * Extract org number from text\n */\nfunction extractOrgNumber(subject: string, query: string): string | undefined {\n  const combined = `${subject} ${query}`;\n  const match = combined.match(/(\\d{6}[-]?\\d{4})/);\n  if (match) {\n    return match[1].replace('-', '');\n  }\n  return undefined;\n}\n\nexport { formatTextAsMarkdown };\n"],"names":[],"mappings":"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"}}]
}