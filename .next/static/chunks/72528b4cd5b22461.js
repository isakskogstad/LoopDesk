;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="b878cefc-aa23-50cd-7dde-321c426c1653")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,294515,e=>{"use strict";let t=(0,e.i(672276).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],294515)},730221,e=>{"use strict";let t=(0,e.i(672276).default)("linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);e.s(["Linkedin",()=>t],730221)},366285,613262,e=>{"use strict";var t=e.i(672276);let s=(0,t.default)("twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);e.s(["Twitter",()=>s],366285);let a=(0,t.default)("youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);e.s(["Youtube",()=>a],613262)},627465,e=>{"use strict";var t=e.i(221390),s=e.i(906140),a=e.i(333601),l=e.i(529276),r=e.i(193940),n=e.i(404481),i=e.i(538130),d=e.i(90658),c=e.i(782938),o=e.i(857089),m=e.i(820505),x=e.i(813329),u=e.i(366285),h=e.i(613262),f=e.i(730221),p=e.i(509878),b=e.i(294515),g=e.i(267385);e.i(716735);var j=e.i(276440);let y=["Affärer","Tech","Nyheter","Sport","Övrigt"],N=[{id:"twitter",name:"Twitter/X",template:"https://rsshub.rssforever.com/twitter/user/{username}",placeholder:"Användarnamn (utan @)",icon:(0,t.jsx)(u.Twitter,{className:"w-4 h-4"})},{id:"youtube",name:"YouTube-kanal",template:"https://rsshub.rssforever.com/youtube/channel/{channelId}",placeholder:"Kanal-ID eller @handle",icon:(0,t.jsx)(h.Youtube,{className:"w-4 h-4"})},{id:"linkedin",name:"LinkedIn Company",template:"https://rsshub.rssforever.com/linkedin/company/{companyName}",placeholder:"Företagsnamn (URL-slug)",icon:(0,t.jsx)(f.Linkedin,{className:"w-4 h-4"})}];function v(){let{status:e}=(0,a.useSession)(),u=(0,l.useRouter)(),[h,f]=(0,s.useState)([]),[v,k]=(0,s.useState)(!0),[w,S]=(0,s.useState)(null),[C,T]=(0,s.useState)(!1),[L,E]=(0,s.useState)(""),[A,F]=(0,s.useState)(""),[R,B]=(0,s.useState)("Affärer"),[z,O]=(0,s.useState)(!1),[P,K]=(0,s.useState)(!1),[M,U]=(0,s.useState)(null),[I,$]=(0,s.useState)(null),[q,G]=(0,s.useState)(""),X=(0,s.useCallback)(async()=>{try{k(!0),S(null);let e=await fetch("/api/feeds");if(!e.ok)throw Error("Failed to load feeds");let t=await e.json();f(t.feeds||[])}catch(e){S(e instanceof Error?e.message:"Unknown error")}finally{k(!1)}},[]);(0,s.useEffect)(()=>{"authenticated"===e?X():"unauthenticated"===e&&u.push("/login")},[e,u,X]);let Y=async e=>{if(e){O(!0),U(null);try{let t=await fetch("/api/feeds/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e})}),s=await t.json();U(s),s.valid&&s.feed?.title&&!A&&F(s.feed.title)}catch{U({valid:!1,error:"Validation failed"})}finally{O(!1)}}},D=async()=>{if(L&&A){K(!0);try{if(!(await fetch("/api/feeds",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:L,name:A,category:R})})).ok)throw Error("Failed to add feed");await X(),V()}catch(e){S(e instanceof Error?e.message:"Failed to add feed")}finally{K(!1)}}},J=async e=>{if(confirm("Är du säker på att du vill ta bort denna källa?"))try{if(!(await fetch(`/api/feeds/${e}`,{method:"DELETE"})).ok)throw Error("Failed to delete feed");await X()}catch(e){S(e instanceof Error?e.message:"Failed to delete feed")}},H=async()=>{try{if(k(!0),!(await fetch("/api/feeds/sync",{method:"POST"})).ok)throw Error("Sync failed");await X()}catch(e){S(e instanceof Error?e.message:"Sync failed")}finally{k(!1)}},V=()=>{T(!1),E(""),F(""),B("Affärer"),U(null),$(null),G("")};return"loading"===e||"authenticated"===e&&v&&0===h.length?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.GradientMesh,{}),(0,t.jsx)("main",{className:"min-h-screen bg-background",children:(0,t.jsx)("div",{className:"max-w-4xl mx-auto px-6 py-12",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,t.jsx)("div",{className:"h-8 bg-muted rounded w-48"}),(0,t.jsx)("div",{className:"h-4 bg-muted rounded w-96"}),(0,t.jsx)("div",{className:"space-y-3 mt-8",children:[1,2,3,4,5].map(e=>(0,t.jsx)("div",{className:"h-16 bg-muted rounded-lg"},e))})]})})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.GradientMesh,{}),(0,t.jsx)("main",{className:"min-h-screen bg-background",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-6 py-12",children:[(0,t.jsxs)("header",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold text-foreground flex items-center gap-3",children:[(0,t.jsx)(r.Rss,{className:"w-6 h-6 text-accent"}),"Nyhetskällor"]}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1",children:"Hantera dina RSS-feeds och nyhetskällor"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(g.Button,{variant:"outline",size:"sm",onClick:H,disabled:v,children:[(0,t.jsx)(c.RefreshCw,{className:`w-4 h-4 mr-2 ${v?"animate-spin":""}`}),"Synka"]}),(0,t.jsxs)(g.Button,{size:"sm",onClick:()=>T(!0),children:[(0,t.jsx)(n.Plus,{className:"w-4 h-4 mr-2"}),"Lägg till"]})]})]}),w&&(0,t.jsxs)("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-3 flex items-center gap-2 text-destructive text-sm",children:[(0,t.jsx)(b.AlertCircle,{className:"w-4 h-4"}),w,(0,t.jsx)("button",{onClick:()=>S(null),className:"ml-auto",children:(0,t.jsx)(m.X,{className:"w-4 h-4"})})]})]}),C&&(0,t.jsxs)("div",{className:"bg-card border border-border rounded-xl p-6 mb-8",children:[(0,t.jsx)("h3",{className:"font-semibold mb-4",children:"Lägg till ny källa"}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground mb-2 block",children:"Snabbmallar"}),(0,t.jsx)("div",{className:"flex gap-2 flex-wrap",children:N.map(e=>(0,t.jsxs)("button",{onClick:()=>$(I===e.id?null:e.id),className:`flex items-center gap-2 px-3 py-2 rounded-lg border transition-colors ${I===e.id?"bg-accent text-white border-accent":"bg-secondary border-border hover:border-accent"}`,children:[e.icon,(0,t.jsx)("span",{className:"text-sm",children:e.name})]},e.id))})]}),I&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground mb-2 block",children:N.find(e=>e.id===I)?.placeholder}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",value:q,onChange:e=>G(e.target.value),placeholder:N.find(e=>e.id===I)?.placeholder,className:"flex-1 px-3 py-2 bg-background border border-border rounded-lg text-sm"}),(0,t.jsx)(g.Button,{size:"sm",onClick:()=>(e=>{let t=N.find(t=>t.id===e);if(t&&q){let e=t.template.replace(/\{[^}]+\}/,q);E(e),Y(e)}})(I),disabled:!q,children:"Applicera"})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground mb-2 block",children:"RSS-URL"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"url",value:L,onChange:e=>E(e.target.value),onBlur:()=>L&&Y(L),placeholder:"https://example.com/feed.xml",className:"flex-1 px-3 py-2 bg-background border border-border rounded-lg text-sm"}),z&&(0,t.jsx)(x.Loader2,{className:"w-5 h-5 animate-spin text-muted-foreground self-center"}),M?.valid&&(0,t.jsx)(o.Check,{className:"w-5 h-5 text-green-500 self-center"}),M&&!M.valid&&(0,t.jsx)(m.X,{className:"w-5 h-5 text-destructive self-center"})]}),M?.error&&(0,t.jsx)("p",{className:"text-sm text-destructive mt-1",children:M.error}),M?.feed&&(0,t.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:[M.feed.itemCount," artiklar hittades"]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground mb-2 block",children:"Namn"}),(0,t.jsx)("input",{type:"text",value:A,onChange:e=>F(e.target.value),placeholder:"Källans namn",className:"w-full px-3 py-2 bg-background border border-border rounded-lg text-sm"})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground mb-2 block",children:"Kategori"}),(0,t.jsx)("div",{className:"flex gap-2 flex-wrap",children:y.map(e=>(0,t.jsx)("button",{onClick:()=>B(e),className:`px-3 py-1.5 rounded-full text-sm transition-colors ${R===e?"bg-accent text-white":"bg-secondary hover:bg-secondary/80"}`,children:e},e))})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(g.Button,{variant:"outline",onClick:V,children:"Avbryt"}),(0,t.jsx)(g.Button,{onClick:D,disabled:!L||!A||P||null!==M&&!M.valid,children:P?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Lägger till..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Plus,{className:"w-4 h-4 mr-2"}),"Lägg till källa"]})})]})]}),(0,t.jsx)("div",{className:"space-y-3",children:0!==h.length||v?h.map(e=>(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg p-4 flex items-center gap-4 hover:border-accent/50 transition-colors",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-secondary flex items-center justify-center",children:(0,t.jsx)(p.Globe,{className:"w-5 h-5 text-muted-foreground"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h4",{className:"font-medium text-foreground truncate",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:e.url})]}),e.category&&(0,t.jsx)("span",{className:"px-2 py-1 bg-secondary rounded text-xs text-muted-foreground",children:e.category}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("button",{onClick:()=>window.open(e.url,"_blank"),className:"p-2 hover:bg-secondary rounded-lg transition-colors",title:"Öppna feed",children:(0,t.jsx)(d.ExternalLink,{className:"w-4 h-4 text-muted-foreground"})}),(0,t.jsx)("button",{onClick:()=>J(e.id),className:"p-2 hover:bg-destructive/10 rounded-lg transition-colors",title:"Ta bort",children:(0,t.jsx)(i.Trash2,{className:"w-4 h-4 text-destructive"})})]})]},e.id)):(0,t.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,t.jsx)(r.Rss,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,t.jsx)("p",{children:"Inga nyhetskällor ännu"}),(0,t.jsx)("p",{className:"text-sm",children:'Klicka på "Lägg till" för att lägga till din första källa'})]})})]})})]})}e.s(["default",()=>v])}]);

//# debugId=b878cefc-aa23-50cd-7dde-321c426c1653
//# sourceMappingURL=35a60fedc64b16e4.js.map